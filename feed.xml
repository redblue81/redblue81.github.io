<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.9.3">Jekyll</generator><link href="https://red-blue.it/feed.xml" rel="self" type="application/atom+xml" /><link href="https://red-blue.it/" rel="alternate" type="text/html" /><updated>2023-08-23T23:32:32+02:00</updated><id>https://red-blue.it/feed.xml</id><title type="html">RedBlue’s Blog</title><subtitle>Another technology addicted&apos;s personal page</subtitle><author><name>RedBlue</name></author><entry><title type="html">Jekyll, generatore di siti statici</title><link href="https://red-blue.it/guide/blog/2023/08/23/jekyll-generatore-di-siti-statici.html" rel="alternate" type="text/html" title="Jekyll, generatore di siti statici" /><published>2023-08-23T00:00:00+02:00</published><updated>2023-08-23T00:00:00+02:00</updated><id>https://red-blue.it/guide/blog/2023/08/23/jekyll-generatore-di-siti-statici</id><content type="html" xml:base="https://red-blue.it/guide/blog/2023/08/23/jekyll-generatore-di-siti-statici.html">&lt;p&gt;Piccolo post introduttivo su &lt;a href=&quot;https://jekyllrb.com/&quot;&gt;Jekyll&lt;/a&gt;, il generatore di siti web statici.&lt;/p&gt;

&lt;p&gt;Per tantissimi anni ho usato per questo blog un CMS (Content Management System), con il quale gestivo un cosidetto sito web &lt;strong&gt;dinamico&lt;/strong&gt;, ovvero esisteva un database in cui tutti i dati del sito erano memorizzati, ed era poi il CMS stesso che provvedeva a recuperare tali dati all’occorrenza e a creare &lt;em&gt;“on demand”&lt;/em&gt; le pagine web da visualizzare.&lt;/p&gt;

&lt;p&gt;All’opposto di un sistema del genere ci sono i siti web &lt;strong&gt;statici&lt;/strong&gt;, nei quali invece le pagine web sono direttamente presenti sul server, senza dover ricorrere ad un database. In, pratica, si ha a che fare con semplici file HTML.&lt;/p&gt;

&lt;p&gt;Jekyll è un software che aiuta a generare siti web statici, usando templates per costruire le pagine web per le quali scriviamo i contenuti. Jekyll non usa databases, né è in grado di &lt;em&gt;“hostare”&lt;/em&gt; il sito creato, il quale va uploadato su un servizio online per la pubblicazione (ad esempio &lt;a href=&quot;https://pages.github.com/&quot;&gt;GitHub Pages&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;Ovviamente il ricorso ad un software come Jekyll va valutato attentamente, esistono tipologie di siti che hanno necessariamente bisogno di database e CMS, ma nel caso di siti come il mio, i vantaggi possono essere diversi:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;manutenzione pari quasi a zero (non ci sono aggiornamenti da applicare se non in rare occasioni);&lt;/li&gt;
  &lt;li&gt;semplicità di backup (basta un semplice copia e incolla);&lt;/li&gt;
  &lt;li&gt;la possibilità di usare un sistema di versionamento del codice, ad esempio &lt;strong&gt;Git&lt;/strong&gt;;&lt;/li&gt;
  &lt;li&gt;spesso il sito risultante è estremamente veloce (a patto di non generare pagine particolarmente pesanti).&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Aggiungo che, tempo permettendo, ci si può divertire a personalizzare l’aspetto del sito a piacimento in maniera piuttosto rapida, non essendo necessaria praticamente alcuna conoscenza avanzata di programmazione.&lt;/p&gt;

&lt;p&gt;Nei prossimi post, vedremo l’installazione, la gestione offline/online e la creazione di post con Jekyll.&lt;/p&gt;

&lt;p&gt;Stay tuned..&lt;/p&gt;</content><author><name>RedBlue</name></author><category term="guide" /><category term="blog" /><summary type="html">Piccolo post introduttivo su Jekyll, il generatore di siti web statici.</summary></entry><entry><title type="html">Convertire un disco MBR in GPT senza perdere dati</title><link href="https://red-blue.it/tips%20&%20tricks/linux/2021/10/22/convertire-un-disco-mbr-in-gpt-senza-perdere-dati.html" rel="alternate" type="text/html" title="Convertire un disco MBR in GPT senza perdere dati" /><published>2021-10-22T15:05:00+02:00</published><updated>2021-10-22T15:05:00+02:00</updated><id>https://red-blue.it/tips%20&amp;%20tricks/linux/2021/10/22/convertire-un-disco-mbr-in-gpt-senza-perdere-dati</id><content type="html" xml:base="https://red-blue.it/tips%20&amp;%20tricks/linux/2021/10/22/convertire-un-disco-mbr-in-gpt-senza-perdere-dati.html">&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Convertire un disco MBR in  GTP &lt;strong&gt;senza perdere dati in Linux&lt;/strong&gt; &amp;egrave; semplice, basta utilizzare un semplicissimo comando: &lt;strong&gt;gdisk&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Lo scenario: abbiamo un disco che presenta un classico record di boot (&lt;strong&gt;MBR&lt;/strong&gt;), quindi una tabella delle partizioni di tipo &lt;strong&gt;BIOS&lt;/strong&gt;, e abbiamo bisogno di convertirlo nel nuovo standard &lt;strong&gt;GPT&lt;/strong&gt;, che utilizza &lt;strong&gt;UEFI&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Questo consente di creare pi&amp;ugrave; di quattro partizioni su un singolo disco e superare il limite dei 2 TB di dimensioni.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;L&apos;operazione di conversione andrebbe fatta prima di installare un qualsiasi OS, ma in caso il sistema operativo sia gi&amp;agrave; installato, &amp;egrave; possibile usare gdisk per convertire un disco MBR in GPT senza perdere dati.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Semplicemente (supponendo che il disco da convertire sia /dev/sda), dare:&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:syntaxhighlighter/code {&quot;language&quot;:&quot;bash&quot;} --&gt;&lt;/p&gt;
&lt;pre class=&quot;wp-block-syntaxhighlighter-code&quot;&gt;sudo gdisk /dev/sda&lt;/pre&gt;
&lt;p&gt;&lt;!-- /wp:syntaxhighlighter/code --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;A questo punto, avremo una schermata in cui sar&amp;agrave; ben visibile la dicitura &lt;strong&gt;MBR: MBR only&lt;/strong&gt; e &lt;strong&gt;GPT: not present&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Premiamo w e confermiamo l&apos;operazione, il tutto sar&amp;agrave; velocissimo.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span style=&quot;text-decoration: underline;&quot;&gt;ATTENZIONE: personalmente non ho avuto problemi particolari, ma l&apos;operazione non &amp;egrave; comunque esente da rischi. Un backup preventivo &amp;egrave; sempre una buona idea in questi casi.&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Proseguiamo:&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:syntaxhighlighter/code {&quot;language&quot;:&quot;bash&quot;} --&gt;&lt;/p&gt;
&lt;pre class=&quot;wp-block-syntaxhighlighter-code&quot;&gt;sudo partprobe /dev/sda
sudo grub-install /dev/sda&lt;/pre&gt;
&lt;p&gt;&lt;!-- /wp:syntaxhighlighter/code --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Al &lt;strong&gt;reboot&lt;/strong&gt; avremo il disco convertito in GTP (baster&amp;agrave; verificarlo dalla schermata di gdisk, che riporter&amp;agrave; &lt;strong&gt;GPT: present&lt;/strong&gt;).&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;A questo punto, abbiamo due strade, o abbiamo gi&amp;agrave; una partizione &lt;strong&gt;/boot/efi&lt;/strong&gt; (necessaria all&apos;avvio di OS basati su UEFI, alcune distribuzioni Linux prevedono questa possibilit&amp;agrave;), oppure dovremo crearne una, ad esempio con &lt;strong&gt;gparted&lt;/strong&gt;. In tal caso ricordate, dimensione minima 100 MB, tipo FAT32, flag boot da settare.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Alla prossima..&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;</content><author><name>RedBlue</name></author><category term="tips &amp; tricks" /><category term="linux" /><summary type="html">Convertire un disco MBR in GTP senza perdere dati in Linux &amp;egrave; semplice, basta utilizzare un semplicissimo comando: gdisk. Lo scenario: abbiamo un disco che presenta un classico record di boot (MBR), quindi una tabella delle partizioni di tipo BIOS, e abbiamo bisogno di convertirlo nel nuovo standard GPT, che utilizza UEFI. Questo consente di creare pi&amp;ugrave; di quattro partizioni su un singolo disco e superare il limite dei 2 TB di dimensioni. L&apos;operazione di conversione andrebbe fatta prima di installare un qualsiasi OS, ma in caso il sistema operativo sia gi&amp;agrave; installato, &amp;egrave; possibile usare gdisk per convertire un disco MBR in GPT senza perdere dati. Semplicemente (supponendo che il disco da convertire sia /dev/sda), dare: sudo gdisk /dev/sda A questo punto, avremo una schermata in cui sar&amp;agrave; ben visibile la dicitura MBR: MBR only e GPT: not present. Premiamo w e confermiamo l&apos;operazione, il tutto sar&amp;agrave; velocissimo. ATTENZIONE: personalmente non ho avuto problemi particolari, ma l&apos;operazione non &amp;egrave; comunque esente da rischi. Un backup preventivo &amp;egrave; sempre una buona idea in questi casi. Proseguiamo: sudo partprobe /dev/sda sudo grub-install /dev/sda Al reboot avremo il disco convertito in GTP (baster&amp;agrave; verificarlo dalla schermata di gdisk, che riporter&amp;agrave; GPT: present). A questo punto, abbiamo due strade, o abbiamo gi&amp;agrave; una partizione /boot/efi (necessaria all&apos;avvio di OS basati su UEFI, alcune distribuzioni Linux prevedono questa possibilit&amp;agrave;), oppure dovremo crearne una, ad esempio con gparted. In tal caso ricordate, dimensione minima 100 MB, tipo FAT32, flag boot da settare. Alla prossima..</summary></entry><entry><title type="html">Reinstallare GRUB su partizione Efi</title><link href="https://red-blue.it/tips%20&%20tricks/linux/2021/10/17/reinstallare-grub-su-partizione-efi.html" rel="alternate" type="text/html" title="Reinstallare GRUB su partizione Efi" /><published>2021-10-17T16:50:03+02:00</published><updated>2021-10-17T16:50:03+02:00</updated><id>https://red-blue.it/tips%20&amp;%20tricks/linux/2021/10/17/reinstallare-grub-su-partizione-efi</id><content type="html" xml:base="https://red-blue.it/tips%20&amp;%20tricks/linux/2021/10/17/reinstallare-grub-su-partizione-efi.html">&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Mi &amp;egrave; capitato di trovarmi nella condizione di dover reinstallare GRUB su partizione Efi, in quanto di fatto il sistema &lt;strong&gt;non era pi&amp;ugrave; in grado di avviarsi&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Ho dovuto faticare pi&amp;ugrave; del previsto, in quanto di fatto l&apos;uso di Efi rende leggermente diverse le consuete operazioni di &lt;strong&gt;ripristino&lt;/strong&gt;, ma alla fine sono riuscito a reinstallare Grub su partizione Efi. Esistono dei tool che promettono di riparare in maniera quasi del tutto automatica queste situazioni, ma ho preferito procedere via codice.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Premetto che io uso &lt;a href=&quot;https://linuxmint.com/download_lmde.php&quot; target=&quot;_blank&quot; rel=&quot;noreferrer noopener&quot;&gt;LMDE 4&lt;/a&gt; (&lt;strong&gt;Linux Mint Debian Edition&lt;/strong&gt;), ma i passi fondamentalmente sono gli stessi per qualsiasi distribuzione.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Per prima cosa, procuriamoci una live di LMDE e la portiamo su USB (ad esempio) con un software tipo &lt;a href=&quot;https://www.balena.io/etcher/&quot; target=&quot;_blank&quot; rel=&quot;noreferrer noopener&quot;&gt;Balena Etcher&lt;/a&gt;. Una volta avviato il sistema in versione live, apriamo un terminale e digitiamo:&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:syntaxhighlighter/code --&gt;&lt;/p&gt;
&lt;pre class=&quot;wp-block-syntaxhighlighter-code&quot;&gt;sudo mount /dev/sda2 /mnt
sudo mount /dev/sda1 /mnt/boot/efi
for i in /dev /dev/pts /proc /sys /run; do sudo mount -B $i /mnt$i; done
sudo chroot /mnt
grub-install /dev/sda
update-grub  &lt;/pre&gt;
&lt;p&gt;&lt;!-- /wp:syntaxhighlighter/code --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;In questo esempio sda &amp;egrave; il disco sul quale va reinstallato il GRUB, che nel mio caso contiene varie partizioni, compresa una dedicata per il boot, sda2 &amp;egrave; la partizione dov&apos;&amp;egrave; installato LMDE (in generale il sistema operativo da avviare), e sda1 &amp;egrave; la partizione di boot Efi.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;A questo punto, dovremmo aver gi&amp;agrave; terminato (al termine dovremmo vedere la lista delle immagini di avvio rilevate), ma in realt&amp;agrave; al sottoscritto si &amp;egrave; presentato questo ulteriore errore:&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:syntaxhighlighter/code --&gt;&lt;/p&gt;
&lt;pre class=&quot;wp-block-syntaxhighlighter-code&quot;&gt;/usr/sbin/grub-probe: error: failed to get canonical path of `/boot/grub/fonts/UbuntuMono16.pf2&apos;.&lt;/pre&gt;
&lt;p&gt;&lt;!-- /wp:syntaxhighlighter/code --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Dopo un&apos;ulteriore ricerca in rete, mi sono reso conto che la soluzione &amp;egrave; pi&amp;ugrave; semplice di quanto possa sembrare. Si tratta semplicemente di editare il file &lt;strong&gt;/etc/default/grub.d/60_mint-theme.cfg&lt;/strong&gt;, andando a sostituire il carattere indicato nell&apos;errore (UbuntuMono16.pf2), con un semplicissimo &lt;strong&gt;unicode.pf2&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Rilanciato &lt;strong&gt;grub-update&lt;/strong&gt;, tutto va a buon fine e riesce a reinstallare GRUB su partizione Efi.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Riavviare il PC e il boot dovrebbe adesso riuscire.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Alla prossima..&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:tadv/classic-paragraph /--&gt;&lt;/p&gt;</content><author><name>RedBlue</name></author><category term="tips &amp; tricks" /><category term="linux" /><summary type="html">Mi &amp;egrave; capitato di trovarmi nella condizione di dover reinstallare GRUB su partizione Efi, in quanto di fatto il sistema non era pi&amp;ugrave; in grado di avviarsi. Ho dovuto faticare pi&amp;ugrave; del previsto, in quanto di fatto l&apos;uso di Efi rende leggermente diverse le consuete operazioni di ripristino, ma alla fine sono riuscito a reinstallare Grub su partizione Efi. Esistono dei tool che promettono di riparare in maniera quasi del tutto automatica queste situazioni, ma ho preferito procedere via codice. Premetto che io uso LMDE 4 (Linux Mint Debian Edition), ma i passi fondamentalmente sono gli stessi per qualsiasi distribuzione. Per prima cosa, procuriamoci una live di LMDE e la portiamo su USB (ad esempio) con un software tipo Balena Etcher. Una volta avviato il sistema in versione live, apriamo un terminale e digitiamo: sudo mount /dev/sda2 /mnt sudo mount /dev/sda1 /mnt/boot/efi for i in /dev /dev/pts /proc /sys /run; do sudo mount -B $i /mnt$i; done sudo chroot /mnt grub-install /dev/sda update-grub In questo esempio sda &amp;egrave; il disco sul quale va reinstallato il GRUB, che nel mio caso contiene varie partizioni, compresa una dedicata per il boot, sda2 &amp;egrave; la partizione dov&apos;&amp;egrave; installato LMDE (in generale il sistema operativo da avviare), e sda1 &amp;egrave; la partizione di boot Efi. A questo punto, dovremmo aver gi&amp;agrave; terminato (al termine dovremmo vedere la lista delle immagini di avvio rilevate), ma in realt&amp;agrave; al sottoscritto si &amp;egrave; presentato questo ulteriore errore: /usr/sbin/grub-probe: error: failed to get canonical path of `/boot/grub/fonts/UbuntuMono16.pf2&apos;. Dopo un&apos;ulteriore ricerca in rete, mi sono reso conto che la soluzione &amp;egrave; pi&amp;ugrave; semplice di quanto possa sembrare. Si tratta semplicemente di editare il file /etc/default/grub.d/60_mint-theme.cfg, andando a sostituire il carattere indicato nell&apos;errore (UbuntuMono16.pf2), con un semplicissimo unicode.pf2. Rilanciato grub-update, tutto va a buon fine e riesce a reinstallare GRUB su partizione Efi. Riavviare il PC e il boot dovrebbe adesso riuscire. Alla prossima..</summary></entry><entry><title type="html">Domotica - Integrare Home Assistant con Alexa</title><link href="https://red-blue.it/guide/linux/in%20evidenza/domotica/2021/08/30/domotica-integrare-home-assistant-con-alexa.html" rel="alternate" type="text/html" title="Domotica - Integrare Home Assistant con Alexa" /><published>2021-08-30T14:12:00+02:00</published><updated>2021-08-30T14:12:00+02:00</updated><id>https://red-blue.it/guide/linux/in%20evidenza/domotica/2021/08/30/domotica-integrare-home-assistant-con-alexa</id><content type="html" xml:base="https://red-blue.it/guide/linux/in%20evidenza/domotica/2021/08/30/domotica-integrare-home-assistant-con-alexa.html">&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Oggi vediamo come &lt;strong&gt;integrare Home Assistant con Alexa&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://localhost:4000/domotica&quot; data-type=&quot;page&quot; data-id=&quot;4071&quot; target=&quot;_blank&quot; rel=&quot;noreferrer noopener&quot;&gt;Finora&lt;/a&gt; abbiamo un sistema controllabile unicamente dall&apos;interfaccia del PC o dall&apos;app, ma la possibilit&amp;agrave; di usare tutto solo con la voce non pu&amp;ograve; essere trascurata.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Diciamo subito che esistono almeno due modi di realizzare questa integrazione: il primo, pi&amp;ugrave; semplice, prevede di far apparire tutto come fosse una &lt;strong&gt;lampadina&lt;/strong&gt;, il secondo invece prevede una vera e propria integrazione mediante una &lt;strong&gt;skill&lt;/strong&gt; realizzata apposta.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Ho scelto il secondo metodo, all&apos;apparenza molto complesso, ma in realt&amp;agrave; vedremo come integrare Home Assistant con Alexa sia pi&amp;ugrave; semplice del previsto, basta procedere con calma e seguire le istruzioni che scriver&amp;ograve;.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:more --&gt;&lt;br /&gt;
&lt;!--more--&gt;&lt;br /&gt;
&lt;!-- /wp:more --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Premessa&lt;/strong&gt;: &amp;egrave; necessario che Home Assistant sia &lt;a rel=&quot;noreferrer noopener&quot; href=&quot;http://localhost:4000/domotica/domotica-accedere-a-home-assistant-dallesterno.html&quot; data-type=&quot;post&quot; data-id=&quot;4121&quot; target=&quot;_blank&quot;&gt;raggiungibile dall&apos;esterno&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Primo passo.&lt;/strong&gt; Iniziamo col creare un &lt;strong&gt;token di accesso a lunga vita&lt;/strong&gt; dal menu relativo al nostro utente (in basso a sinistra), baster&amp;agrave; crearlo, indicare un nome e copiarlo da qualche parte, servir&amp;agrave; successivamente.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Secondo passo&lt;/strong&gt;, editiamo il file configuration.yaml ed inseriamo le seguenti righe di codice:&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:syntaxhighlighter/code {&quot;language&quot;:&quot;yaml&quot;} --&gt;&lt;/p&gt;
&lt;pre class=&quot;wp-block-syntaxhighlighter-code&quot;&gt;alexa:
  smart_home:
    filter:
      include_domains:
        - light&lt;/pre&gt;
&lt;p&gt;&lt;!-- /wp:syntaxhighlighter/code --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;In questo modo stiamo indicando che useremo solo il dominio &lt;strong&gt;lights&lt;/strong&gt;, ovvero controlleremo con Alexa solo le luci (ma ovviamente possiamo estendere il tutto in un secondo momento a qualsiasi dominio consentito).&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Adesso &amp;egrave; il momento di iscriverci alla &lt;strong&gt;Developer Console&lt;/strong&gt; di Amazon, baster&amp;agrave; loggarsi in &lt;a rel=&quot;noreferrer noopener&quot; href=&quot;https://developer.amazon.com/it/&quot; target=&quot;_blank&quot;&gt;questa pagina&lt;/a&gt; col proprio account Amazon, cliccare su &lt;strong&gt;Developer Console&lt;/strong&gt; (in alto a destra) e creare un &lt;strong&gt;Nuovo profilo di Sicurezza&lt;/strong&gt; cliccando su &lt;strong&gt;Impostazioni -&gt; Profili di sicurezza&lt;/strong&gt;, assegnamo come nome ad esempio Domotica e come descrizione scegliamo &lt;strong&gt;Dialogo tra Home Assistant e Alexa&lt;/strong&gt;, infine salviamo.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Ora &amp;egrave; il momento di creare un account su &lt;a href=&quot;https://aws.amazon.com/it/&quot; target=&quot;_blank&quot; rel=&quot;noreferrer noopener&quot;&gt;Amazon Web Services&lt;/a&gt;, dovremo registrarci con un account non professionale, inserendo i dati di una carta di credito (necessari per la verifica dell&apos;identit&amp;agrave;) dalla quale verr&amp;agrave; prelevata una piccola somma (poi restituita). Ovviamente, l&apos;uso che faremo di questo account &lt;strong&gt;non preveder&amp;agrave;&lt;/strong&gt; alcun pagamento in futuro.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Dopo la registrazione, andiamo sulla console, clicchiamo a sinistra su &lt;strong&gt;Ruoli&lt;/strong&gt; e poi su &lt;strong&gt;Crea ruolo&lt;/strong&gt;. A questo punto scegliamo &lt;strong&gt;Servizio AWS&lt;/strong&gt;, nella stessa pagina clicchiamo su &lt;strong&gt;Lambda&lt;/strong&gt; e vedremo in basso a destra abilitarsi il pulsante &lt;strong&gt;Successivo: Autorizzazioni&lt;/strong&gt;, sul quale dovremo cliccare.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Nella successiva schermata, selezionare &lt;strong&gt;AWSLambdaBasicExecutionRole&lt;/strong&gt; (se non &amp;egrave; immediatamente visualizzato basta cercarlo nel box in cima all&apos;elenco), poi cliccare su &lt;strong&gt;Successivo: Tag&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Nella successiva schermata non c&apos;&amp;egrave; bisogno di modificare alcunch&amp;egrave;, si pu&amp;ograve; direttamente cliccare in basso su &lt;strong&gt;Successivo: Verifica&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;A questo punto, inseriamo come nome ruolo &lt;strong&gt;AWSLambdaBasicExecutionRole-SmartHome&lt;/strong&gt;, lasciando pure vuota la descrizione e clicchiamo finalmente su &lt;strong&gt;Crea Ruolo&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Ci siamo quasi, &amp;egrave; il momento di creare la funzione che permette di integrare Home Assistant con Alexa!&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Andiamo nella &lt;a rel=&quot;noreferrer noopener&quot; href=&quot;https://console.aws.amazon.com/lambda/home&quot; target=&quot;_blank&quot;&gt;dashboard relativa alle funzioni&lt;/a&gt; e clicchiamo su &lt;strong&gt;Crea Funzione&lt;/strong&gt;. Proseguiamo con &lt;strong&gt;Crea da zero&lt;/strong&gt; e inseriamo un nome (Domotica), scegliamo &lt;strong&gt;Python 3.8&lt;/strong&gt; come linguaggio, in &lt;strong&gt;Modifica del ruolo di esecuzione predefinito&lt;/strong&gt; scegliamo &lt;strong&gt;Utilizza un ruolo esistente&lt;/strong&gt; e selezioniamo quello creato in precedenza.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Clicchiamo su &lt;strong&gt;Crea Funzione&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;A questo punto raggiungiamo &lt;a rel=&quot;noreferrer noopener&quot; href=&quot;https://developer.amazon.com/alexa/console/ask&quot; target=&quot;_blank&quot;&gt;questa pagina&lt;/a&gt;, clicchiamo su &lt;strong&gt;Crea Skill&lt;/strong&gt;, assegnamo un nome, scegliamo Italiano come lingua, &lt;strong&gt;Smart Home&lt;/strong&gt; come &lt;strong&gt;Model&lt;/strong&gt; e infine &lt;strong&gt;Provision your own&lt;/strong&gt;. In alto a destra c&apos;&amp;egrave; il pulsante &lt;strong&gt;Create skill&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Nella successiva schermata scegliamo (se non gi&amp;agrave; selezionata) la &lt;strong&gt;versione 3&lt;/strong&gt; del payload e copiate da qualche parte lo &lt;strong&gt;skill-ID&lt;/strong&gt; che trovate subito sotto.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Possiamo tornare sulla &lt;a href=&quot;https://console.aws.amazon.com/lambda/home&quot; target=&quot;_blank&quot; rel=&quot;noreferrer noopener&quot;&gt;dashboard delle funzioni&lt;/a&gt; che abbiamo visto in precedenza e selezionare la funzione Domotica (se l&apos;avete chiamata cos&amp;igrave;), clicchiamo poi su &lt;strong&gt;Aggiungi trigger&lt;/strong&gt; e selezioniamo nella schermata successiva &lt;strong&gt;Alexa Smart Home&lt;/strong&gt;, inserendo come &lt;strong&gt;ID Applicazione&lt;/strong&gt; lo skill-ID che abbiamo copiato al passo precedente, infine clicchiamo su &lt;strong&gt;Aggiungi&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Torneremo indietro di una schermata, basta cliccare su Domotica (vedremo un&apos;icona arancione a sinistra) e in basso, nella scheda &lt;strong&gt;Codice&lt;/strong&gt;, bisogner&amp;agrave; cancellare quello che viene proposto e copiare il codice che si trova in &lt;a href=&quot;https://gist.githubusercontent.com/matt2005/744b5ef548cc13d88d0569eea65f5e5b/raw/97b018bb12f574e780927c7b8dc85beae3fce6cc/lambda_function.py&quot; target=&quot;_blank&quot; rel=&quot;noreferrer noopener&quot;&gt;questa pagina&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Clicchiamo su &lt;strong&gt;File -&gt; Salva&lt;/strong&gt; e poi su &lt;strong&gt;Deploy&lt;/strong&gt; (si trova tutto nella scheda Codice), poi andiamo nella scheda &lt;strong&gt;Configurazione -&gt; Modifica -&gt; Aggiungi Variabili d&apos;ambiente&lt;/strong&gt;. Dovremo aggiungere le seguenti 4 variabili:&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:list --&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;BASE_URL&lt;/strong&gt;: https://nomedominio.duckdns.org&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;DEBUG&lt;/strong&gt;: True&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;NOT_VERIFY_SSL&lt;/strong&gt;: True&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;LONG_LIVED_ACCESS_TOKEN&lt;/strong&gt;: il token creato inizialmente su Home Assistant&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;!-- /wp:list --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Attenzione perch&amp;egrave; &lt;strong&gt;ad ogni variabile&lt;/strong&gt; occorre cliccare su Aggiungi variabile d&apos;ambiente.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Salviamo il tutto e clicchiamo su &lt;strong&gt;Copia ARN&lt;/strong&gt; in alto a destra, mettiamo da parte anche questo codice che ci servir&amp;agrave; a breve.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Testiamo ora il tutto, basta cliccare su &lt;strong&gt;Test -&gt; Configure test event -&gt; Crea un nuovo evento di test&lt;/strong&gt;. Diamo un nome e inseriamo le seguenti righe di codice:&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:syntaxhighlighter/code {&quot;language&quot;:&quot;jscript&quot;} --&gt;&lt;/p&gt;
&lt;pre class=&quot;wp-block-syntaxhighlighter-code&quot;&gt;{
  &quot;directive&quot;: {
    &quot;header&quot;: {
      &quot;namespace&quot;: &quot;Alexa.Discovery&quot;,
      &quot;name&quot;: &quot;Discover&quot;,
      &quot;payloadVersion&quot;: &quot;3&quot;,
      &quot;messageId&quot;: &quot;1bd5d003-31b9-476f-ad03-71d471922820&quot;
    },
    &quot;payload&quot;: {
      &quot;scope&quot;: {
        &quot;type&quot;: &quot;BearerToken&quot;
      }
    }
  }
}&lt;/pre&gt;
&lt;p&gt;&lt;!-- /wp:syntaxhighlighter/code --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Clicchiamo su &lt;strong&gt;Crea&lt;/strong&gt;, poi su &lt;strong&gt;Test&lt;/strong&gt;. Se tutto &amp;egrave; andato bene, la risposta sar&amp;agrave; affermativa.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Torniamo adesso alla &lt;a rel=&quot;noreferrer noopener&quot; href=&quot;https://developer.amazon.com/alexa/console/ask&quot; target=&quot;_blank&quot;&gt;console di AWS&lt;/a&gt;, selezionando la skill creata in precedenza. Come &lt;strong&gt;Default Endpoint&lt;/strong&gt; occorre inserire il codice ARN copiato in precedenza. Salviamo e poi clicchiamo su &lt;strong&gt;Setup Account Linking&lt;/strong&gt; in basso, nella schermata successiva compiliamo i campi come segue:&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:list --&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Your Web Authorization URI&lt;/strong&gt;: https://nomedominio.duckdns.org/auth/authorize&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Access Token URI&lt;/strong&gt;: https://nomedominio.duckdns.org/auth/token&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Your Client ID&lt;/strong&gt;: https://layla.amazon.com&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Client Secret&lt;/strong&gt;: Home Assistant HDJ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Your Authentication Scheme&lt;/strong&gt;: Credentials in request body&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Scope&lt;/strong&gt;: cliccate su add scope e inserite smart_home&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;!-- /wp:list --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Lasciate invariato il resto e cliccate su Save.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;A questo punto per integrare Home Assistant con Alexa non resta che collegare il tutto all&apos;app Alexa! Andiamo in &lt;a rel=&quot;noreferrer noopener&quot; href=&quot;https://alexa.amazon.com/&quot; target=&quot;_blank&quot;&gt;questa pagina&lt;/a&gt;, facciamo il login con le credenziali del nostro dispositivo Alexa, poi su &lt;strong&gt;Skill -&gt; Le tue skill -&gt; Skill per sviluppatori&lt;/strong&gt;: dovremmo vedere la skill Domotica che abbiamo creato e, cliccando su &lt;strong&gt;Attiva&lt;/strong&gt;, dovrebbe segnalare che la skill &amp;egrave; collegata con successo.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Andando infine su Scopri i dispositivi dovrebbero &lt;strong&gt;magicamente&lt;/strong&gt; apparire in lista tutti i dispositivi (per ora solo le luci, ve lo ricordo) gestiti da Home Assistant! Se tutto &amp;egrave; andato bene, siamo riusciti ad integrare Home Assistant con Alexa.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Non resta che limare la configurazione creata per aumentare la sicurezza, torniamo in &lt;a rel=&quot;noreferrer noopener&quot; href=&quot;https://eu-west-1.console.aws.amazon.com/lambda/home?region=eu-west-1#/functions/Domotica?tab=configuration&quot; target=&quot;_blank&quot;&gt;questa pagina&lt;/a&gt;, e cancelliamo le due variabili d&apos;ambiente DEBUG e LONG_LIVED_ACCESS_TOKEN create in precedenza, non serviranno ulteriormente.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Il token di accesso a lunga vita a questo punto pu&amp;ograve; essere cancellato anche da Home Assistant.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;So che integrare Home Assistant con Alexa pu&amp;ograve; sembrare un processo piuttosto complesso, ma seguendo il tutto con calma vi assicuro che il risultato &amp;egrave; estremamente soddisfacente.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Alla prossima..&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:tadv/classic-paragraph /--&gt;&lt;/p&gt;</content><author><name>RedBlue</name></author><category term="guide" /><category term="linux" /><category term="in evidenza" /><category term="domotica" /><category term="home assistant" /><category term="alexa" /><category term="smart home" /><category term="domorica" /><category term="skill" /><category term="integrare" /><summary type="html">Oggi vediamo come integrare Home Assistant con Alexa. Finora abbiamo un sistema controllabile unicamente dall&apos;interfaccia del PC o dall&apos;app, ma la possibilit&amp;agrave; di usare tutto solo con la voce non pu&amp;ograve; essere trascurata. Diciamo subito che esistono almeno due modi di realizzare questa integrazione: il primo, pi&amp;ugrave; semplice, prevede di far apparire tutto come fosse una lampadina, il secondo invece prevede una vera e propria integrazione mediante una skill realizzata apposta. Ho scelto il secondo metodo, all&apos;apparenza molto complesso, ma in realt&amp;agrave; vedremo come integrare Home Assistant con Alexa sia pi&amp;ugrave; semplice del previsto, basta procedere con calma e seguire le istruzioni che scriver&amp;ograve;. Premessa: &amp;egrave; necessario che Home Assistant sia raggiungibile dall&apos;esterno. Primo passo. Iniziamo col creare un token di accesso a lunga vita dal menu relativo al nostro utente (in basso a sinistra), baster&amp;agrave; crearlo, indicare un nome e copiarlo da qualche parte, servir&amp;agrave; successivamente. Secondo passo, editiamo il file configuration.yaml ed inseriamo le seguenti righe di codice: alexa: smart_home: filter: include_domains: - light In questo modo stiamo indicando che useremo solo il dominio lights, ovvero controlleremo con Alexa solo le luci (ma ovviamente possiamo estendere il tutto in un secondo momento a qualsiasi dominio consentito). Adesso &amp;egrave; il momento di iscriverci alla Developer Console di Amazon, baster&amp;agrave; loggarsi in questa pagina col proprio account Amazon, cliccare su Developer Console (in alto a destra) e creare un Nuovo profilo di Sicurezza cliccando su Impostazioni -&gt; Profili di sicurezza, assegnamo come nome ad esempio Domotica e come descrizione scegliamo Dialogo tra Home Assistant e Alexa, infine salviamo. Ora &amp;egrave; il momento di creare un account su Amazon Web Services, dovremo registrarci con un account non professionale, inserendo i dati di una carta di credito (necessari per la verifica dell&apos;identit&amp;agrave;) dalla quale verr&amp;agrave; prelevata una piccola somma (poi restituita). Ovviamente, l&apos;uso che faremo di questo account non preveder&amp;agrave; alcun pagamento in futuro. Dopo la registrazione, andiamo sulla console, clicchiamo a sinistra su Ruoli e poi su Crea ruolo. A questo punto scegliamo Servizio AWS, nella stessa pagina clicchiamo su Lambda e vedremo in basso a destra abilitarsi il pulsante Successivo: Autorizzazioni, sul quale dovremo cliccare. Nella successiva schermata, selezionare AWSLambdaBasicExecutionRole (se non &amp;egrave; immediatamente visualizzato basta cercarlo nel box in cima all&apos;elenco), poi cliccare su Successivo: Tag. Nella successiva schermata non c&apos;&amp;egrave; bisogno di modificare alcunch&amp;egrave;, si pu&amp;ograve; direttamente cliccare in basso su Successivo: Verifica. A questo punto, inseriamo come nome ruolo AWSLambdaBasicExecutionRole-SmartHome, lasciando pure vuota la descrizione e clicchiamo finalmente su Crea Ruolo. Ci siamo quasi, &amp;egrave; il momento di creare la funzione che permette di integrare Home Assistant con Alexa! Andiamo nella dashboard relativa alle funzioni e clicchiamo su Crea Funzione. Proseguiamo con Crea da zero e inseriamo un nome (Domotica), scegliamo Python 3.8 come linguaggio, in Modifica del ruolo di esecuzione predefinito scegliamo Utilizza un ruolo esistente e selezioniamo quello creato in precedenza. Clicchiamo su Crea Funzione. A questo punto raggiungiamo questa pagina, clicchiamo su Crea Skill, assegnamo un nome, scegliamo Italiano come lingua, Smart Home come Model e infine Provision your own. In alto a destra c&apos;&amp;egrave; il pulsante Create skill. Nella successiva schermata scegliamo (se non gi&amp;agrave; selezionata) la versione 3 del payload e copiate da qualche parte lo skill-ID che trovate subito sotto. Possiamo tornare sulla dashboard delle funzioni che abbiamo visto in precedenza e selezionare la funzione Domotica (se l&apos;avete chiamata cos&amp;igrave;), clicchiamo poi su Aggiungi trigger e selezioniamo nella schermata successiva Alexa Smart Home, inserendo come ID Applicazione lo skill-ID che abbiamo copiato al passo precedente, infine clicchiamo su Aggiungi. Torneremo indietro di una schermata, basta cliccare su Domotica (vedremo un&apos;icona arancione a sinistra) e in basso, nella scheda Codice, bisogner&amp;agrave; cancellare quello che viene proposto e copiare il codice che si trova in questa pagina. Clicchiamo su File -&gt; Salva e poi su Deploy (si trova tutto nella scheda Codice), poi andiamo nella scheda Configurazione -&gt; Modifica -&gt; Aggiungi Variabili d&apos;ambiente. Dovremo aggiungere le seguenti 4 variabili: BASE_URL: https://nomedominio.duckdns.org DEBUG: True NOT_VERIFY_SSL: True LONG_LIVED_ACCESS_TOKEN: il token creato inizialmente su Home Assistant Attenzione perch&amp;egrave; ad ogni variabile occorre cliccare su Aggiungi variabile d&apos;ambiente. Salviamo il tutto e clicchiamo su Copia ARN in alto a destra, mettiamo da parte anche questo codice che ci servir&amp;agrave; a breve. Testiamo ora il tutto, basta cliccare su Test -&gt; Configure test event -&gt; Crea un nuovo evento di test. Diamo un nome e inseriamo le seguenti righe di codice: { &quot;directive&quot;: { &quot;header&quot;: { &quot;namespace&quot;: &quot;Alexa.Discovery&quot;, &quot;name&quot;: &quot;Discover&quot;, &quot;payloadVersion&quot;: &quot;3&quot;, &quot;messageId&quot;: &quot;1bd5d003-31b9-476f-ad03-71d471922820&quot; }, &quot;payload&quot;: { &quot;scope&quot;: { &quot;type&quot;: &quot;BearerToken&quot; } } } } Clicchiamo su Crea, poi su Test. Se tutto &amp;egrave; andato bene, la risposta sar&amp;agrave; affermativa. Torniamo adesso alla console di AWS, selezionando la skill creata in precedenza. Come Default Endpoint occorre inserire il codice ARN copiato in precedenza. Salviamo e poi clicchiamo su Setup Account Linking in basso, nella schermata successiva compiliamo i campi come segue: Your Web Authorization URI: https://nomedominio.duckdns.org/auth/authorize Access Token URI: https://nomedominio.duckdns.org/auth/token Your Client ID: https://layla.amazon.com Client Secret: Home Assistant HDJ Your Authentication Scheme: Credentials in request body Scope: cliccate su add scope e inserite smart_home Lasciate invariato il resto e cliccate su Save. A questo punto per integrare Home Assistant con Alexa non resta che collegare il tutto all&apos;app Alexa! Andiamo in questa pagina, facciamo il login con le credenziali del nostro dispositivo Alexa, poi su Skill -&gt; Le tue skill -&gt; Skill per sviluppatori: dovremmo vedere la skill Domotica che abbiamo creato e, cliccando su Attiva, dovrebbe segnalare che la skill &amp;egrave; collegata con successo. Andando infine su Scopri i dispositivi dovrebbero magicamente apparire in lista tutti i dispositivi (per ora solo le luci, ve lo ricordo) gestiti da Home Assistant! Se tutto &amp;egrave; andato bene, siamo riusciti ad integrare Home Assistant con Alexa. Non resta che limare la configurazione creata per aumentare la sicurezza, torniamo in questa pagina, e cancelliamo le due variabili d&apos;ambiente DEBUG e LONG_LIVED_ACCESS_TOKEN create in precedenza, non serviranno ulteriormente. Il token di accesso a lunga vita a questo punto pu&amp;ograve; essere cancellato anche da Home Assistant. So che integrare Home Assistant con Alexa pu&amp;ograve; sembrare un processo piuttosto complesso, ma seguendo il tutto con calma vi assicuro che il risultato &amp;egrave; estremamente soddisfacente. Alla prossima..</summary></entry><entry><title type="html">Domotica - Automazioni e scene su Home Assistant</title><link href="https://red-blue.it/guide/in%20evidenza/raspberry%20pi/domotica/2021/08/01/domotica-automazioni-e-scene-su-home-assistant.html" rel="alternate" type="text/html" title="Domotica - Automazioni e scene su Home Assistant" /><published>2021-08-01T14:54:00+02:00</published><updated>2021-08-01T14:54:00+02:00</updated><id>https://red-blue.it/guide/in%20evidenza/raspberry%20pi/domotica/2021/08/01/domotica-automazioni-e-scene-su-home-assistant</id><content type="html" xml:base="https://red-blue.it/guide/in%20evidenza/raspberry%20pi/domotica/2021/08/01/domotica-automazioni-e-scene-su-home-assistant.html">&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Poter accendere e spegnere una lampadina dall&apos;app di Home Assistant &amp;egrave; bello, ma usare &lt;strong&gt;automazioni e scene&lt;/strong&gt; rende il tutto veramente fantastico!&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://localhost:4000/domotica&quot; data-type=&quot;page&quot; data-id=&quot;4071&quot; target=&quot;_blank&quot; rel=&quot;noreferrer noopener&quot;&gt;In questa pagina&lt;/a&gt; c&apos;&amp;egrave; il riepilogo di tutto ci&amp;ograve; che abbiamo fatto finora, oggi invece ci concentriamo su come iniziare ad automatizzare davvero il funzionamento dei nostri dispositivi.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Immaginiamo di voler gestire l&apos;illuminazione di una stanza, con automazioni e scene diventa semplicissimo.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:more --&gt;&lt;br /&gt;
&lt;!--more--&gt;&lt;br /&gt;
&lt;!-- /wp:more --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Supponiamo di avere, in un salone ad esempio, due lampadari separati, uno con un&apos;unica lampadina, l&apos;altro con tre lampadine, tutte smart ovviamente.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Per prima cosa, &lt;strong&gt;le raggruppiamo tutte insieme&lt;/strong&gt;, chiamandole genericamente &quot;Salone&quot; (in modo da poterle spegnere ed accendere tutte insieme), poi &lt;strong&gt;raggruppiamo anche le tre&lt;/strong&gt; del secondo lampadario, chiamandole ad esempio &quot;LuciTV&quot;, come fare? Basta editare il file &lt;strong&gt;configuration.yaml&lt;/strong&gt; (&lt;a rel=&quot;noreferrer noopener&quot; href=&quot;http://localhost:4000/domotica/domotica-configurare-home-assistant.html&quot; data-type=&quot;URL&quot; data-id=&quot;https://www.red-blue.it/domotica/domotica-configurare-home-assistant.html&quot; target=&quot;_blank&quot;&gt;avete installato l&apos;add on File Editor vero?&lt;/a&gt;) ed inserire il seguente codice:&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:syntaxhighlighter/code {&quot;language&quot;:&quot;yaml&quot;} --&gt;&lt;/p&gt;
&lt;pre class=&quot;wp-block-syntaxhighlighter-code&quot;&gt;light:
  - platform: group
    name: LuciTV
    entities:
      - light.tv_1
      - light.tv_2
      - light.tv_3
  - platform: group
    name: Salone
    entities:
      - light.tv_1
      - light.tv_2
      - light.tv_3
      - light.tavolo_salone&lt;/pre&gt;
&lt;p&gt;&lt;!-- /wp:syntaxhighlighter/code --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Ovviamente, diamo per scontato che tutte le lampadine siano state aggiunte a &lt;a rel=&quot;noreferrer noopener&quot; href=&quot;http://localhost:4000/domotica/domotica-deconz.html&quot; data-type=&quot;post&quot; data-id=&quot;4135&quot; target=&quot;_blank&quot;&gt;Deconz&lt;/a&gt;. A questo punto, dopo un riavvio di Home Assistant, possiamo procedere con &lt;strong&gt;automazioni e scene&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;In primo luogo, baster&amp;agrave; aggiungere alla &lt;strong&gt;plancia principale&lt;/strong&gt; una nuova scheda &lt;strong&gt;Pulsante &lt;/strong&gt;relativa all&apos;entit&amp;agrave; Salone che abbiamo appena creato, ed ecco che saremo in grado di accendere e spegnere tutte le lampadine in un colpo solo.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Ma potremo anche decidere di creare un pulsante per il gruppo LuciTV, e vari pulsanti per le singole lampadine, in modo da gestirle una alla volta.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Potremmo decidere arbitrariamente di accendere tutte le luci al tramonto (magari in salone non &amp;egrave; il massimo, ma immaginate una lampadina sul terrazzo ad esempio), o spegnere tutto ad una certa ora (stile caserma).&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Andiamo in &lt;strong&gt;Impostazioni -&gt; Automazioni&lt;/strong&gt;, poi &lt;strong&gt;Crea automazione&lt;/strong&gt; e scegliamo di creare un&apos;automazione &lt;strong&gt;vuota&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Le diamo un nome, come attivazione mettiamo ad esempio &lt;strong&gt;Sole -&gt; Tramonto&lt;/strong&gt;, sotto, nelle &lt;strong&gt;Azioni &lt;/strong&gt;scegliamo tra i Dispositivi una lampadina, e clicchiamo su Accendi, salviamo e il gioco &amp;egrave; fatto! Tutto estremamente semplice ed intuitivo!&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;E se volessimo impostare uno stato particolare per il nostro salone? Ad esempio, vogliamo vedere un film, quindi spegniamo la lampadina del tavolo, e settiamo un colore per il gruppo LuciTV, magari con luminosit&amp;agrave; al 30%.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Settiamo le nostre lampadine come descritto, poi andiamo in &lt;strong&gt;Impostazioni -&gt; Scene&lt;/strong&gt;, poi &lt;strong&gt;Nuova scena&lt;/strong&gt;, diamole un nome e semplicemente scegliamo tutti i dispositivi che vogliamo includere, uno alla volta, poi salviamo. Salveremo cos&amp;igrave; anche lo stato in cui si trovano.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Successivamente, baster&amp;agrave; attivare la scena appena creata e tutti i dispositivi assumeranno lo stato desiderato.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;E se avessimo un sensore di movimento in casa?&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Potremmo impostare un&apos;automazione che ad esempio accende le luci se rileva un movimento, o ancora sfruttare una webcam (alle quali dedicher&amp;ograve; un articolo a parte) per inviare sul nostro smartphone una foto in caso venga rilevato un movimento mentre non siamo in casa.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;!--
&lt;p&gt;Per chi potesse essere interessato, io su Amazon ho trovato questo kit di lampadine smart ZigBee, spesso vengono proposte in offerta, ma in generale moltissime lampadine WiFi/ZigBee sono compatibili con Home Assistant. Vi lascio anche il link di un paio di sensori di movimento dal prezzo davvero irrisorio.&lt;/p&gt;
--&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:html --&gt;&lt;br /&gt;
&lt;!--
  &lt;iframe style=&quot;width:120px;height:240px;&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; src=&quot;//rcm-eu.amazon-adsystem.com/e/cm?lt1=_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=redblue03-21&amp;language=it_IT&amp;o=29&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=as_ss_li_til&amp;asins=B07VHRP4PS&amp;linkId=808cba61e068b05e2d328ce41ee426cd&quot;&gt;&lt;/iframe&gt;&lt;br /&gt;
&lt;iframe style=&quot;width:120px;height:240px;&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; src=&quot;//rcm-eu.amazon-adsystem.com/e/cm?lt1=_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=redblue03-21&amp;language=it_IT&amp;o=29&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=as_ss_li_til&amp;asins=B07VD9LR3T&amp;linkId=bf1f1ec7ea116570e48ed2eafc3380fd&quot;&gt;&lt;/iframe&gt;&lt;br /&gt;
&lt;iframe style=&quot;width:120px;height:240px;&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; src=&quot;//rcm-eu.amazon-adsystem.com/e/cm?lt1=_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=redblue03-21&amp;language=it_IT&amp;o=29&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=as_ss_li_til&amp;asins=B0817QP9NJ&amp;linkId=1d26aed7dc1e01313fe13eef3e22c67c&quot;&gt;&lt;/iframe&gt;&lt;br /&gt;
--&gt;
&lt;!-- /wp:html --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;E se volessimo controllare tutto con &lt;strong&gt;Alexa&lt;/strong&gt;?&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Alla prossima..&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;</content><author><name>RedBlue</name></author><category term="guide" /><category term="in evidenza" /><category term="raspberry pi" /><category term="domotica" /><category term="raspberry pi" /><category term="domotica" /><category term="home assistant" /><category term="automazioni" /><category term="scene" /><summary type="html">Poter accendere e spegnere una lampadina dall&apos;app di Home Assistant &amp;egrave; bello, ma usare automazioni e scene rende il tutto veramente fantastico! In questa pagina c&apos;&amp;egrave; il riepilogo di tutto ci&amp;ograve; che abbiamo fatto finora, oggi invece ci concentriamo su come iniziare ad automatizzare davvero il funzionamento dei nostri dispositivi. Immaginiamo di voler gestire l&apos;illuminazione di una stanza, con automazioni e scene diventa semplicissimo. Supponiamo di avere, in un salone ad esempio, due lampadari separati, uno con un&apos;unica lampadina, l&apos;altro con tre lampadine, tutte smart ovviamente. Per prima cosa, le raggruppiamo tutte insieme, chiamandole genericamente &quot;Salone&quot; (in modo da poterle spegnere ed accendere tutte insieme), poi raggruppiamo anche le tre del secondo lampadario, chiamandole ad esempio &quot;LuciTV&quot;, come fare? Basta editare il file configuration.yaml (avete installato l&apos;add on File Editor vero?) ed inserire il seguente codice: light: - platform: group name: LuciTV entities: - light.tv_1 - light.tv_2 - light.tv_3 - platform: group name: Salone entities: - light.tv_1 - light.tv_2 - light.tv_3 - light.tavolo_salone Ovviamente, diamo per scontato che tutte le lampadine siano state aggiunte a Deconz. A questo punto, dopo un riavvio di Home Assistant, possiamo procedere con automazioni e scene. In primo luogo, baster&amp;agrave; aggiungere alla plancia principale una nuova scheda Pulsante relativa all&apos;entit&amp;agrave; Salone che abbiamo appena creato, ed ecco che saremo in grado di accendere e spegnere tutte le lampadine in un colpo solo. Ma potremo anche decidere di creare un pulsante per il gruppo LuciTV, e vari pulsanti per le singole lampadine, in modo da gestirle una alla volta. Potremmo decidere arbitrariamente di accendere tutte le luci al tramonto (magari in salone non &amp;egrave; il massimo, ma immaginate una lampadina sul terrazzo ad esempio), o spegnere tutto ad una certa ora (stile caserma). Andiamo in Impostazioni -&gt; Automazioni, poi Crea automazione e scegliamo di creare un&apos;automazione vuota. Le diamo un nome, come attivazione mettiamo ad esempio Sole -&gt; Tramonto, sotto, nelle Azioni scegliamo tra i Dispositivi una lampadina, e clicchiamo su Accendi, salviamo e il gioco &amp;egrave; fatto! Tutto estremamente semplice ed intuitivo! E se volessimo impostare uno stato particolare per il nostro salone? Ad esempio, vogliamo vedere un film, quindi spegniamo la lampadina del tavolo, e settiamo un colore per il gruppo LuciTV, magari con luminosit&amp;agrave; al 30%. Settiamo le nostre lampadine come descritto, poi andiamo in Impostazioni -&gt; Scene, poi Nuova scena, diamole un nome e semplicemente scegliamo tutti i dispositivi che vogliamo includere, uno alla volta, poi salviamo. Salveremo cos&amp;igrave; anche lo stato in cui si trovano. Successivamente, baster&amp;agrave; attivare la scena appena creata e tutti i dispositivi assumeranno lo stato desiderato. E se avessimo un sensore di movimento in casa? Potremmo impostare un&apos;automazione che ad esempio accende le luci se rileva un movimento, o ancora sfruttare una webcam (alle quali dedicher&amp;ograve; un articolo a parte) per inviare sul nostro smartphone una foto in caso venga rilevato un movimento mentre non siamo in casa. E se volessimo controllare tutto con Alexa? Alla prossima..</summary></entry><entry><title type="html">Domotica - Deconz</title><link href="https://red-blue.it/guide/in%20evidenza/raspberry%20pi/domotica/2021/07/17/domotica-deconz.html" rel="alternate" type="text/html" title="Domotica - Deconz" /><published>2021-07-17T11:18:54+02:00</published><updated>2021-07-17T11:18:54+02:00</updated><id>https://red-blue.it/guide/in%20evidenza/raspberry%20pi/domotica/2021/07/17/domotica-deconz</id><content type="html" xml:base="https://red-blue.it/guide/in%20evidenza/raspberry%20pi/domotica/2021/07/17/domotica-deconz.html">&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Vediamo oggi come usare &lt;strong&gt;Deconz&lt;/strong&gt; per gestire dispositivi &lt;strong&gt;ZigBee&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://localhost:4000/domotica&quot; data-type=&quot;page&quot; data-id=&quot;4071&quot;&gt;Finora abbiamo soprattutto configurato ed ottimizzato Home Assistant&lt;/a&gt;, &amp;egrave; il momento di iniziare a collegare (ed usare) dispositivi al nostro sistema domotico.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;I dispositivi che possono essere riconosciuti, e quindi gestiti, da Home Assistant possono sfruttare la rete WIFI di casa, oppure usare la tecnologia ZigBee.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;ZigBee &amp;egrave; un protocollo che consente la connessione di dispositivi in modalit&amp;agrave; wireless, e che normalmente ha bisogno di un gateway per funzionare: in parole povere, colleghiamo il gateway ZigBee alla nostra rete WIFI, e tutti i dispositivi che vogliamo controllare al gateway.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Tra l&apos;altro, alcuni dispositivi ZigBee fanno anche da ripetitoti di segnale, in modo da estendere la portata della vostra rete senza aggiungere altro in casa.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Ovviamente, produttori diversi prevedono ognuno il proprio gateway, e questo, al crescere del numero di dispositivi domotici in casa, potrebbe significare numerosi gateway, ognuno con la propria app di gestione (seppur tutti connessi ad Home Assistant).&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:more --&gt;&lt;br /&gt;
&lt;!--more--&gt;&lt;br /&gt;
&lt;!-- /wp:more --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Poco comodo.. A meno di usare un &lt;strong&gt;gateway universale&lt;/strong&gt;, ovvero un gateway capace di &amp;ldquo;colloquiare&amp;rdquo; con dispositivi ZigBee di produttori diversi.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Ne esistono diversi in commercio, io ho scelto il &lt;strong&gt;ConBee 2&lt;/strong&gt; della Phoscon, questo aggeggino qui:&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:html --&gt;&lt;br /&gt;
&lt;iframe style=&quot;width:120px;height:240px;&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; src=&quot;//rcm-eu.amazon-adsystem.com/e/cm?lt1=_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=redblue03-21&amp;language=it_IT&amp;o=29&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=as_ss_li_til&amp;asins=B07PZ7ZHG5&amp;linkId=67c00c29bfe5a2deb8d1d3a2f030ca29&quot;&gt;&lt;/iframe&gt;&lt;br /&gt;
&lt;!-- /wp:html --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Esiste in due versioni, chiavetta USB (quello che ho acquistato io), oppure scheda da collegare direttamente al Raspberry Pi. Io ho scelto la chiavetta USB in modo da poter avere il Raspberry in un punto, e la chiavetta (mediante una prolunga) in una posizione comoda per &quot;raggiungere&quot; i vari dispositivi che ho in casa.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Una volta collegato ad una porta USB, basta semplicemente installare il componente aggiuntivo Deconz.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Quindi andiamo su &lt;strong&gt;Supervisor&lt;/strong&gt; e installiamo il plugin Deconz, non avviamolo per&amp;ograve; perch&amp;egrave; dobbiamo effettuare alcuni passaggi di configurazione. &lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Dobbiamo andare su &lt;strong&gt;Supervisor -&gt; Sistema -&gt; Host -&gt; Hardware&lt;/strong&gt; (che raggiungete cliccando i tre puntini in basso a destra nella scheda Host), poi &lt;strong&gt;CTRL+F&lt;/strong&gt; e cerchiamo &lt;strong&gt;ConBee&lt;/strong&gt;, poi nel lungo listato relativo alla periferica, cerchiamo la stringa che inizia per &lt;strong&gt;/dev/serial/by-id&lt;/strong&gt;. Copiamolo perch&amp;egrave; potrebbe servire tra poco.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Andiamo nel componente Deconz che abbiamo installato precedentemente e clicchiamo in alto su Configurazione, poi scegliamo l&apos;id del dispositivo nel primo campo (oppure se non propone nulla, incolliamo l&apos;id copiato prima).&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Non resta che avviare il componente, poi apriamo l&apos;interfaccia web, scegliamo &lt;strong&gt;Phoscon&lt;/strong&gt;, e clicchiamo sulla nostra chiavetta; ci chieder&amp;agrave; di creare una password, facciamolo. Non connettiamo luci, n&amp;eacute; creiamo gruppi (lo faremo da Home Assistant). Finito.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;A questo punto iniziamo ad aggiungere dispositivi, basta semplicemente cliccare sul menu in alto (l&lt;strong&gt;e tre linee&lt;/strong&gt;) e cliccare sul tipo di dispositivo da aggiungere (luci, sensori o interruttori). Ad esempio, supponendo di voler aggiungere una lampadina, occorre metterla in modalit&amp;agrave; &lt;strong&gt;pairing&lt;/strong&gt; (qui purtroppo non posso aiutarvi molto, ogni dispositivo ha le sue modalit&amp;agrave;, in genere un dispositivo nuovo appena acceso si mette in modalit&amp;agrave; pairing, altrimenti generalmente occorre fare un reset) e il gioco &amp;egrave; fatto, in pochissimi secondi verr&amp;agrave; riconosciuta!&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;A questo punto, in Home Assistant possiamo cominciare a divertirci.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Per prima cosa, in Deconz dobbiamo andare su &lt;strong&gt;Settings -&gt; Gateway&lt;/strong&gt; e cliccare su &lt;strong&gt;Authenticate App&lt;/strong&gt;, poi in &lt;strong&gt;Impostazioni -&gt; Integrazioni&lt;/strong&gt; su Home Assistant cliccate su aggiungi integrazione e cercate Deconz, poi cliccate su Invia e il gioco &amp;egrave; fatto, vi importer&amp;agrave; la chiavetta con tutti i dispositivi ad essa agganciati.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;A questo punto, vanno direttamente gestiti i dispositivi su Home Assistant. Ad esempio, potremmo decidere di &lt;strong&gt;raggruppare&lt;/strong&gt; delle lampadine, e gestirle come gruppo, oppure impostare delle routine semi automatiche. Successivamente potremmo anche gestirle con Alexa.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Potremmo anche definire una o pi&amp;ugrave; scene: supponiamo di voler creare una luca ambientale per vedere film, o una per avere una luce comunque pi&amp;ugrave; rilassante dopo cena.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Nel prossimo post vedremo proprio alcuni esempio di uso di dispositivi configurati su Home Assistant.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Alla prossima..&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:tadv/classic-paragraph /--&gt;&lt;/p&gt;</content><author><name>RedBlue</name></author><category term="guide" /><category term="in evidenza" /><category term="raspberry pi" /><category term="domotica" /><category term="domotica" /><category term="home assistant" /><category term="deconz" /><category term="raspebrry pi" /><category term="zigbee" /><summary type="html">Vediamo oggi come usare Deconz per gestire dispositivi ZigBee. Finora abbiamo soprattutto configurato ed ottimizzato Home Assistant, &amp;egrave; il momento di iniziare a collegare (ed usare) dispositivi al nostro sistema domotico. I dispositivi che possono essere riconosciuti, e quindi gestiti, da Home Assistant possono sfruttare la rete WIFI di casa, oppure usare la tecnologia ZigBee. ZigBee &amp;egrave; un protocollo che consente la connessione di dispositivi in modalit&amp;agrave; wireless, e che normalmente ha bisogno di un gateway per funzionare: in parole povere, colleghiamo il gateway ZigBee alla nostra rete WIFI, e tutti i dispositivi che vogliamo controllare al gateway. Tra l&apos;altro, alcuni dispositivi ZigBee fanno anche da ripetitoti di segnale, in modo da estendere la portata della vostra rete senza aggiungere altro in casa. Ovviamente, produttori diversi prevedono ognuno il proprio gateway, e questo, al crescere del numero di dispositivi domotici in casa, potrebbe significare numerosi gateway, ognuno con la propria app di gestione (seppur tutti connessi ad Home Assistant). Poco comodo.. A meno di usare un gateway universale, ovvero un gateway capace di &amp;ldquo;colloquiare&amp;rdquo; con dispositivi ZigBee di produttori diversi. Ne esistono diversi in commercio, io ho scelto il ConBee 2 della Phoscon, questo aggeggino qui: Esiste in due versioni, chiavetta USB (quello che ho acquistato io), oppure scheda da collegare direttamente al Raspberry Pi. Io ho scelto la chiavetta USB in modo da poter avere il Raspberry in un punto, e la chiavetta (mediante una prolunga) in una posizione comoda per &quot;raggiungere&quot; i vari dispositivi che ho in casa. Una volta collegato ad una porta USB, basta semplicemente installare il componente aggiuntivo Deconz. Quindi andiamo su Supervisor e installiamo il plugin Deconz, non avviamolo per&amp;ograve; perch&amp;egrave; dobbiamo effettuare alcuni passaggi di configurazione. Dobbiamo andare su Supervisor -&gt; Sistema -&gt; Host -&gt; Hardware (che raggiungete cliccando i tre puntini in basso a destra nella scheda Host), poi CTRL+F e cerchiamo ConBee, poi nel lungo listato relativo alla periferica, cerchiamo la stringa che inizia per /dev/serial/by-id. Copiamolo perch&amp;egrave; potrebbe servire tra poco. Andiamo nel componente Deconz che abbiamo installato precedentemente e clicchiamo in alto su Configurazione, poi scegliamo l&apos;id del dispositivo nel primo campo (oppure se non propone nulla, incolliamo l&apos;id copiato prima). Non resta che avviare il componente, poi apriamo l&apos;interfaccia web, scegliamo Phoscon, e clicchiamo sulla nostra chiavetta; ci chieder&amp;agrave; di creare una password, facciamolo. Non connettiamo luci, n&amp;eacute; creiamo gruppi (lo faremo da Home Assistant). Finito. A questo punto iniziamo ad aggiungere dispositivi, basta semplicemente cliccare sul menu in alto (le tre linee) e cliccare sul tipo di dispositivo da aggiungere (luci, sensori o interruttori). Ad esempio, supponendo di voler aggiungere una lampadina, occorre metterla in modalit&amp;agrave; pairing (qui purtroppo non posso aiutarvi molto, ogni dispositivo ha le sue modalit&amp;agrave;, in genere un dispositivo nuovo appena acceso si mette in modalit&amp;agrave; pairing, altrimenti generalmente occorre fare un reset) e il gioco &amp;egrave; fatto, in pochissimi secondi verr&amp;agrave; riconosciuta! A questo punto, in Home Assistant possiamo cominciare a divertirci. Per prima cosa, in Deconz dobbiamo andare su Settings -&gt; Gateway e cliccare su Authenticate App, poi in Impostazioni -&gt; Integrazioni su Home Assistant cliccate su aggiungi integrazione e cercate Deconz, poi cliccate su Invia e il gioco &amp;egrave; fatto, vi importer&amp;agrave; la chiavetta con tutti i dispositivi ad essa agganciati. A questo punto, vanno direttamente gestiti i dispositivi su Home Assistant. Ad esempio, potremmo decidere di raggruppare delle lampadine, e gestirle come gruppo, oppure impostare delle routine semi automatiche. Successivamente potremmo anche gestirle con Alexa. Potremmo anche definire una o pi&amp;ugrave; scene: supponiamo di voler creare una luca ambientale per vedere film, o una per avere una luce comunque pi&amp;ugrave; rilassante dopo cena. Nel prossimo post vedremo proprio alcuni esempio di uso di dispositivi configurati su Home Assistant. Alla prossima..</summary></entry><entry><title type="html">Domotica - Approfondimento su Home Assistant</title><link href="https://red-blue.it/tips%20&%20tricks/linux/in%20evidenza/domotica/2021/07/05/domotica-approfondimento-su-home-assistant.html" rel="alternate" type="text/html" title="Domotica - Approfondimento su Home Assistant" /><published>2021-07-05T13:59:00+02:00</published><updated>2021-07-05T13:59:00+02:00</updated><id>https://red-blue.it/tips%20&amp;%20tricks/linux/in%20evidenza/domotica/2021/07/05/domotica-approfondimento-su-home-assistant</id><content type="html" xml:base="https://red-blue.it/tips%20&amp;%20tricks/linux/in%20evidenza/domotica/2021/07/05/domotica-approfondimento-su-home-assistant.html">&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;In questo articolo vedremo alcuni concetti fondamentali di Home Assistant, necessari al proseguimento della realizzazione del nostro &lt;a href=&quot;http://localhost:4000/domotica&quot; data-type=&quot;page&quot; data-id=&quot;4071&quot; target=&quot;_blank&quot; rel=&quot;noreferrer noopener&quot;&gt;sistema domotico&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Per prima cosa, un po&apos; di termini che occorre conoscere:&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:list --&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Integrazione&lt;/strong&gt;: si tratta di tutto ci&amp;ograve; che possiamo collegare ad Home Assistant, dalle lampadine alle smart TV, passando per il cellulare; attenzione perch&amp;egrave; per integrazione si intendono anche servizi in cloud. Ogni integrazione pu&amp;ograve; contenere multipli dispositivi o entit&amp;agrave;;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Area&lt;/strong&gt;:&amp;nbsp; un&amp;rsquo;area virtuale in cui sono localizzati i nostri dispositivi (una stanza, l&apos;intera casa, la mia scrivania);&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Dispositivo&lt;/strong&gt;: fisico o virtuale,pu&amp;ograve; contenere multiple entit&amp;agrave; (lo smartphone, tanto per fare un esempio);&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Dominio&lt;/strong&gt;: la categoria a cui appartiene un&amp;rsquo;entit&amp;agrave; (es. sensor, light);&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Entit&amp;agrave;&lt;/strong&gt;: un &quot;oggetto&quot; con cui interagisce Home Assistant (es. un interruttore, un sensore);&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Attributi&lt;/strong&gt;: Un valore contenuto all&amp;rsquo;interno di un&amp;rsquo;entit&amp;agrave; (Esempio: Consumo di un interruttore che funge da presa);&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Card&lt;/strong&gt;: una scheda dell&apos;interfaccia grafica legata ad una o pi&amp;ugrave; entit&amp;agrave;.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Automazione&lt;/strong&gt;: un&apos;azione, o una sequenza di azioni, che viene scatenata da un trigger (un evento). Ad esempio, se il cellulare si allontana da casa, attiva il sistema di allarme, oppure ad un certa ora spegni tutto in una stanza.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Scena&lt;/strong&gt;: lo stato di uno o pi&amp;ugrave; entit&amp;agrave;, facilmente richiamabile all&apos;occorrenza (ad esempio, il colore e la luminosit&amp;agrave; delle lampade di una stanza quando vogliamo vedere un film).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;!-- /wp:list --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Ormai &amp;egrave; praticamente tutto configurabile tramite interfaccia grafica, tramite pochissimi clic del mouse. Nonostante tutto, in alcuni casi &amp;egrave; possibile/necessario utilizzare la configurazione mediante file.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Se abbiamo installato il plugin &lt;strong&gt;File Editor&lt;/strong&gt;, sar&amp;agrave; semplice accedere alla directory &lt;strong&gt;/config&lt;/strong&gt;, all&apos;interno della quale si trova il file &lt;strong&gt;configuration.yaml&lt;/strong&gt;, che contiene la configurazione fondamentale di Home Assistant.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Tale file va manipolato con molta attenzione, in quanto una configurazione errata produce instabilit&amp;agrave; del sistema.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;La modifica del configuration.yaml comporta sempre un riavvio per essere applicata. Consiglio sempre di usare la funzione &lt;strong&gt;Impostazioni -&gt; Controlli del server&lt;/strong&gt; prima di riavviare, avremo cos&amp;igrave; almeno una verifica formale di quanto scritto.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Prima di concludere, segnalo la possibilit&amp;agrave; di utilizzare Home Assistant anche attraverso l&apos;apposita &lt;strong&gt;App&lt;/strong&gt;, disponibile nei principali store (&lt;a href=&quot;https://play.google.com/store/apps/details?id=io.homeassistant.companion.android&amp;hl=it&amp;gl=US&quot; target=&quot;_blank&quot; rel=&quot;noreferrer noopener&quot;&gt;link per Android&lt;/a&gt;). Si tratta fondamentalmente della stessa interfaccia che abbiamo visto, ma portata nel mondo mobile.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Consente di controllare completamente il sistema, oltre ad essere un comodissimo strumento per poter controllare la nostra domotica anche quando siamo fuori casa.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Alla prossima..&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;</content><author><name>RedBlue</name></author><category term="tips &amp; tricks" /><category term="linux" /><category term="in evidenza" /><category term="domotica" /><category term="tips" /><category term="tricks" /><category term="consigli" /><category term="configurazione" /><category term="raspberry pi" /><category term="domotica" /><category term="home assistant" /><category term="app android" /><summary type="html">In questo articolo vedremo alcuni concetti fondamentali di Home Assistant, necessari al proseguimento della realizzazione del nostro sistema domotico. Per prima cosa, un po&apos; di termini che occorre conoscere: Integrazione: si tratta di tutto ci&amp;ograve; che possiamo collegare ad Home Assistant, dalle lampadine alle smart TV, passando per il cellulare; attenzione perch&amp;egrave; per integrazione si intendono anche servizi in cloud. Ogni integrazione pu&amp;ograve; contenere multipli dispositivi o entit&amp;agrave;; Area:&amp;nbsp; un&amp;rsquo;area virtuale in cui sono localizzati i nostri dispositivi (una stanza, l&apos;intera casa, la mia scrivania); Dispositivo: fisico o virtuale,pu&amp;ograve; contenere multiple entit&amp;agrave; (lo smartphone, tanto per fare un esempio); Dominio: la categoria a cui appartiene un&amp;rsquo;entit&amp;agrave; (es. sensor, light); Entit&amp;agrave;: un &quot;oggetto&quot; con cui interagisce Home Assistant (es. un interruttore, un sensore); Attributi: Un valore contenuto all&amp;rsquo;interno di un&amp;rsquo;entit&amp;agrave; (Esempio: Consumo di un interruttore che funge da presa); Card: una scheda dell&apos;interfaccia grafica legata ad una o pi&amp;ugrave; entit&amp;agrave;. Automazione: un&apos;azione, o una sequenza di azioni, che viene scatenata da un trigger (un evento). Ad esempio, se il cellulare si allontana da casa, attiva il sistema di allarme, oppure ad un certa ora spegni tutto in una stanza. Scena: lo stato di uno o pi&amp;ugrave; entit&amp;agrave;, facilmente richiamabile all&apos;occorrenza (ad esempio, il colore e la luminosit&amp;agrave; delle lampade di una stanza quando vogliamo vedere un film). Ormai &amp;egrave; praticamente tutto configurabile tramite interfaccia grafica, tramite pochissimi clic del mouse. Nonostante tutto, in alcuni casi &amp;egrave; possibile/necessario utilizzare la configurazione mediante file. Se abbiamo installato il plugin File Editor, sar&amp;agrave; semplice accedere alla directory /config, all&apos;interno della quale si trova il file configuration.yaml, che contiene la configurazione fondamentale di Home Assistant. Tale file va manipolato con molta attenzione, in quanto una configurazione errata produce instabilit&amp;agrave; del sistema. La modifica del configuration.yaml comporta sempre un riavvio per essere applicata. Consiglio sempre di usare la funzione Impostazioni -&gt; Controlli del server prima di riavviare, avremo cos&amp;igrave; almeno una verifica formale di quanto scritto. Prima di concludere, segnalo la possibilit&amp;agrave; di utilizzare Home Assistant anche attraverso l&apos;apposita App, disponibile nei principali store (link per Android). Si tratta fondamentalmente della stessa interfaccia che abbiamo visto, ma portata nel mondo mobile. Consente di controllare completamente il sistema, oltre ad essere un comodissimo strumento per poter controllare la nostra domotica anche quando siamo fuori casa. Alla prossima..</summary></entry><entry><title type="html">Domotica - Accedere a Home Assistant dall’esterno</title><link href="https://red-blue.it/guide/linux/in%20evidenza/domotica/2021/06/28/domotica-accedere-a-home-assistant-dallesterno.html" rel="alternate" type="text/html" title="Domotica - Accedere a Home Assistant dall’esterno" /><published>2021-06-28T13:38:00+02:00</published><updated>2021-06-28T13:38:00+02:00</updated><id>https://red-blue.it/guide/linux/in%20evidenza/domotica/2021/06/28/domotica-accedere-a-home-assistant-dallesterno</id><content type="html" xml:base="https://red-blue.it/guide/linux/in%20evidenza/domotica/2021/06/28/domotica-accedere-a-home-assistant-dallesterno.html">&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Un elemento fondamentale per il nostro sistema domotico &amp;egrave; il poter &lt;strong&gt;accedere a Home Assistant dall&apos;esterno&lt;/strong&gt;. &lt;a href=&quot;http://localhost:4000/domotica&quot; data-type=&quot;page&quot; data-id=&quot;4071&quot;&gt;Finora&lt;/a&gt; abbiamo messo in piedi un sistema funzionante solo finch&amp;egrave; siamo in casa, collegati al nostro router.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Oggi vediamo come poter accedere da Internet mentre siamo fuori casa, ad esempio per controllare una telecamera.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:image {&quot;align&quot;:&quot;center&quot;,&quot;id&quot;:4079,&quot;sizeSlug&quot;:&quot;medium&quot;,&quot;linkDestination&quot;:&quot;none&quot;} --&gt;&lt;/p&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;
&lt;figure class=&quot;aligncenter size-medium&quot;&gt;&lt;img src=&quot;/assets/images/1200px-Home_Assistant_Logo.svg_-300x300.png&quot; alt=&quot;&quot; class=&quot;wp-image-4079&quot;/&gt;&lt;/figure&gt;
&lt;/div&gt;
&lt;p&gt;&lt;!-- /wp:image --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Ci serviremo di un plugin, &lt;strong&gt;DuckDNS&lt;/strong&gt;, che possiamo installare da &lt;strong&gt;Supervisor&lt;/strong&gt;. Per prima cosa per&amp;ograve;, &amp;egrave; necessario creare un account su &lt;a href=&quot;https://www.duckdns.org/&quot; target=&quot;_blank&quot; rel=&quot;noreferrer noopener&quot;&gt;duckdns.org&lt;/a&gt;, quindi andiamo sul sito, creiamo un account (assolutamente gratuito) e scegliamo un nome di dominio, basta cliccare su &quot;&lt;strong&gt;Add domain&lt;/strong&gt;&quot;.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;In tal modo, potremo accedere a Home Assistant dall&apos;esterno tramite l&apos;indirizzo &lt;em&gt;nomescelto.duckdns.org&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:more --&gt;&lt;br /&gt;
&lt;!--more--&gt;&lt;br /&gt;
&lt;!-- /wp:more --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Molto importante, nella pagina relativa al dominio creato, sar&amp;agrave; visualizzato un &lt;strong&gt;token di accesso&lt;/strong&gt;, mettiamolo da parte perch&amp;egrave; ci servir&amp;agrave; tra poco.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:image {&quot;align&quot;:&quot;center&quot;,&quot;id&quot;:4123,&quot;sizeSlug&quot;:&quot;large&quot;,&quot;linkDestination&quot;:&quot;none&quot;} --&gt;&lt;/p&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;
&lt;figure class=&quot;aligncenter size-large&quot;&gt;&lt;img src=&quot;/assets/images/duckdnss-1024x278.png&quot; alt=&quot;&quot; class=&quot;wp-image-4123&quot;/&gt;&lt;/figure&gt;
&lt;/div&gt;
&lt;p&gt;&lt;!-- /wp:image --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Andiamo ora su Home Assistant, e da Supervisor installiamo (se non l&apos;abbiamo fatto prima) il plugin di DuckDNS, e nella scheda &lt;strong&gt;Configurazione &lt;/strong&gt;inseriamo il token di accesso nella relativa riga, oltre ovviamente a specificare il nome di dominio scelto in precedenza.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Consiglio anche di inserire &lt;strong&gt;true &lt;/strong&gt;alla riga &lt;strong&gt;accept_terms&lt;/strong&gt; di &lt;strong&gt;Let&apos;s Encrypt&lt;/strong&gt;, in modo da consentire la ceazione la gestione automatica di un certificato SSL.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;A questo punto siamo gi&amp;agrave; a posto, avviamo il plugin e poi tramite il File Editor (&lt;a href=&quot;http://localhost:4000/domotica/domotica-configurare-home-assistant.html&quot; data-type=&quot;post&quot; data-id=&quot;4102&quot;&gt;lo avete installato vero?&lt;/a&gt;) aggiungiamo subito dopo &lt;strong&gt;default_config:&lt;/strong&gt; le seguenti righe:&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:syntaxhighlighter/code {&quot;language&quot;:&quot;bash&quot;} --&gt;&lt;/p&gt;
&lt;pre class=&quot;wp-block-syntaxhighlighter-code&quot;&gt;http:
  base_url: https://nomedominio.duckdns.org:8123
  ssl_certificate: /ssl/fullchain.pem
  ssl_key: /ssl/privkey.pem&lt;/pre&gt;
&lt;p&gt;&lt;!-- /wp:syntaxhighlighter/code --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Non resta che impostare il &lt;strong&gt;port forwarding&lt;/strong&gt; della porta 8123 sulla porta 443 sul router (purtroppo per questo non posso dare istruzioni precise in quanto dipenden molto dal router in uso).&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Riavviamo infine Home Assistant (&lt;strong&gt;Impostazioni -&gt; Controlli del server&lt;/strong&gt;) e il gioco &amp;egrave; fatto.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;In realt&amp;agrave; c&apos;&amp;egrave; un&apos;ultimo passaggio che consiglio sempre: &lt;strong&gt;installare un reverse proxy&lt;/strong&gt; in modo da aumentare considerevolmente la sicurezza delle connessioni in uscita e in ingresso. &lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Semplicemente, da Supervisor installate il plugin &lt;strong&gt;NGINX Home Assistant SSL proxy&lt;/strong&gt; e avviatelo.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Fatto, ora potete accedere ad Home Assistant dall&apos;esterno, baster&amp;agrave; impostare laa nuova URL in &lt;strong&gt;Impostazioni -&gt; Generale -&gt; URL esterno&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Alla prossima..&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:tadv/classic-paragraph /--&gt;&lt;/p&gt;</content><author><name>RedBlue</name></author><category term="guide" /><category term="linux" /><category term="in evidenza" /><category term="domotica" /><category term="domotica" /><category term="home assistant" /><category term="duckdns" /><category term="accesso remoto guida" /><summary type="html">Un elemento fondamentale per il nostro sistema domotico &amp;egrave; il poter accedere a Home Assistant dall&apos;esterno. Finora abbiamo messo in piedi un sistema funzionante solo finch&amp;egrave; siamo in casa, collegati al nostro router. Oggi vediamo come poter accedere da Internet mentre siamo fuori casa, ad esempio per controllare una telecamera. Ci serviremo di un plugin, DuckDNS, che possiamo installare da Supervisor. Per prima cosa per&amp;ograve;, &amp;egrave; necessario creare un account su duckdns.org, quindi andiamo sul sito, creiamo un account (assolutamente gratuito) e scegliamo un nome di dominio, basta cliccare su &quot;Add domain&quot;. In tal modo, potremo accedere a Home Assistant dall&apos;esterno tramite l&apos;indirizzo nomescelto.duckdns.org. Molto importante, nella pagina relativa al dominio creato, sar&amp;agrave; visualizzato un token di accesso, mettiamolo da parte perch&amp;egrave; ci servir&amp;agrave; tra poco. Andiamo ora su Home Assistant, e da Supervisor installiamo (se non l&apos;abbiamo fatto prima) il plugin di DuckDNS, e nella scheda Configurazione inseriamo il token di accesso nella relativa riga, oltre ovviamente a specificare il nome di dominio scelto in precedenza. Consiglio anche di inserire true alla riga accept_terms di Let&apos;s Encrypt, in modo da consentire la ceazione la gestione automatica di un certificato SSL. A questo punto siamo gi&amp;agrave; a posto, avviamo il plugin e poi tramite il File Editor (lo avete installato vero?) aggiungiamo subito dopo default_config: le seguenti righe: http: base_url: https://nomedominio.duckdns.org:8123 ssl_certificate: /ssl/fullchain.pem ssl_key: /ssl/privkey.pem Non resta che impostare il port forwarding della porta 8123 sulla porta 443 sul router (purtroppo per questo non posso dare istruzioni precise in quanto dipenden molto dal router in uso). Riavviamo infine Home Assistant (Impostazioni -&gt; Controlli del server) e il gioco &amp;egrave; fatto. In realt&amp;agrave; c&apos;&amp;egrave; un&apos;ultimo passaggio che consiglio sempre: installare un reverse proxy in modo da aumentare considerevolmente la sicurezza delle connessioni in uscita e in ingresso. Semplicemente, da Supervisor installate il plugin NGINX Home Assistant SSL proxy e avviatelo. Fatto, ora potete accedere ad Home Assistant dall&apos;esterno, baster&amp;agrave; impostare laa nuova URL in Impostazioni -&gt; Generale -&gt; URL esterno. Alla prossima..</summary></entry><entry><title type="html">Domotica - Configurare Home Assistant</title><link href="https://red-blue.it/guide/linux/in%20evidenza/domotica/2021/06/23/domotica-configurare-home-assistant.html" rel="alternate" type="text/html" title="Domotica - Configurare Home Assistant" /><published>2021-06-23T14:18:00+02:00</published><updated>2021-06-23T14:18:00+02:00</updated><id>https://red-blue.it/guide/linux/in%20evidenza/domotica/2021/06/23/domotica-configurare-home-assistant</id><content type="html" xml:base="https://red-blue.it/guide/linux/in%20evidenza/domotica/2021/06/23/domotica-configurare-home-assistant.html">&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Nuovo articolo dedicato alla &lt;a href=&quot;http://localhost:4000/domotica&quot; data-type=&quot;page&quot; data-id=&quot;4071&quot; target=&quot;_blank&quot; rel=&quot;noreferrer noopener&quot;&gt;domotica&lt;/a&gt;, oggi vediamo come &lt;strong&gt;configurare&lt;/strong&gt; Home Assistant.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;In realt&amp;agrave;, a questo punto dovremmo gi&amp;agrave; disporre di un sistema che si &amp;egrave; autoconfigurato, dopo &lt;a href=&quot;http://localhost:4000/domotica/domotica-installare-home-assistant.html&quot; data-type=&quot;post&quot; data-id=&quot;4056&quot;&gt;l&apos;installazione&lt;/a&gt; infatti abbiamo creato un utente (figura sotto) e indicato la nostra posizione sulla mappa, quindi Home Assistant ci avr&amp;agrave; chiesto se vogliamo configurare delle &lt;strong&gt;integrazioni&lt;/strong&gt; (in base ai dispositivi che pu&amp;ograve; aver rilevato in casa).&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:image {&quot;align&quot;:&quot;center&quot;,&quot;id&quot;:4106,&quot;sizeSlug&quot;:&quot;large&quot;,&quot;linkDestination&quot;:&quot;none&quot;} --&gt;&lt;/p&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;
&lt;figure class=&quot;aligncenter size-large&quot;&gt;&lt;img src=&quot;/assets/images/hassio_1.png&quot; alt=&quot;&quot; class=&quot;wp-image-4106&quot;/&gt;&lt;/figure&gt;
&lt;/div&gt;
&lt;p&gt;&lt;!-- /wp:image --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:more --&gt;&lt;br /&gt;
&lt;!--more--&gt;&lt;br /&gt;
&lt;!-- /wp:more --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Consiglio sia di indicare la posizione di casa sulla mappa (ci torner&amp;agrave; utile per automazioni future, ad esempio &quot;fai qualcosa se siamo tutti fuori casa&quot;), sia di lasciargli configurare eventuali dispositivi (se ci sono, tanto vale iniziare a riconoscerli).&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:image {&quot;align&quot;:&quot;center&quot;,&quot;id&quot;:4107,&quot;sizeSlug&quot;:&quot;large&quot;,&quot;linkDestination&quot;:&quot;none&quot;} --&gt;&lt;/p&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;
&lt;figure class=&quot;aligncenter size-large&quot;&gt;&lt;img src=&quot;/assets/images/hassio_2.png&quot; alt=&quot;&quot; class=&quot;wp-image-4107&quot;/&gt;&lt;/figure&gt;
&lt;/div&gt;
&lt;p&gt;&lt;!-- /wp:image --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;La schermata successiva serve a installare Integrazioni, provate a cercare i dispositivi smart che avete in casa, &amp;egrave; abbastanza probabile che l&apos;integrazione relativa esista gi&amp;agrave;. Ad, esempio, provate a cercare ed installare &lt;strong&gt;Meteorologisk institutt (Met.no)&lt;/strong&gt;, una semplice integrazione con un servizio meteo gratuito.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:image {&quot;align&quot;:&quot;center&quot;,&quot;id&quot;:4108,&quot;sizeSlug&quot;:&quot;large&quot;,&quot;linkDestination&quot;:&quot;none&quot;} --&gt;&lt;/p&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;
&lt;figure class=&quot;aligncenter size-large&quot;&gt;&lt;img src=&quot;/assets/images/hassio_3.png&quot; alt=&quot;&quot; class=&quot;wp-image-4108&quot;/&gt;&lt;/figure&gt;
&lt;/div&gt;
&lt;p&gt;&lt;!-- /wp:image --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Benissimo, saremo catapultati sulla &lt;strong&gt;plancia&lt;/strong&gt; generale, che conterr&amp;agrave; un certo numero di schede (dipende da quello che ha trovato la configurazione iniziale). A questo punto dobbiamo &lt;strong&gt;prendere il controllo&lt;/strong&gt;, clicchiamo in alto a destra sui tre puntini e selezioniamo Modifica plancia:&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:image {&quot;align&quot;:&quot;center&quot;,&quot;id&quot;:4109,&quot;sizeSlug&quot;:&quot;large&quot;,&quot;linkDestination&quot;:&quot;none&quot;} --&gt;&lt;/p&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;
&lt;figure class=&quot;aligncenter size-large&quot;&gt;&lt;img src=&quot;/assets/images/hassio_4.png&quot; alt=&quot;&quot; class=&quot;wp-image-4109&quot;/&gt;&lt;/figure&gt;
&lt;/div&gt;
&lt;p&gt;&lt;!-- /wp:image --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;A questo punto ci viene ricordato che la plancia pu&amp;ograve; essere gestita in automatico, ma il nostro scopo &amp;egrave; configurare Home Assistant, quindi prendiamo il controllo.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:image {&quot;align&quot;:&quot;center&quot;,&quot;id&quot;:4110,&quot;sizeSlug&quot;:&quot;large&quot;,&quot;linkDestination&quot;:&quot;none&quot;} --&gt;&lt;/p&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;
&lt;figure class=&quot;aligncenter size-large&quot;&gt;&lt;img src=&quot;/assets/images/hassio_5.png&quot; alt=&quot;&quot; class=&quot;wp-image-4110&quot;/&gt;&lt;/figure&gt;
&lt;/div&gt;
&lt;p&gt;&lt;!-- /wp:image --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;La plancia a questo punto sar&amp;agrave; diversa nell&apos;aspetto rispetto a prima, ma prima di passarla in esame, clicchiamo in basso a sinistra sul nostro nome utente e a destra selezioniamo &lt;strong&gt;Impostazioni avanzate&lt;/strong&gt;, cos&amp;igrave; da prendere completamente il controllo.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:image {&quot;align&quot;:&quot;center&quot;,&quot;id&quot;:4111,&quot;sizeSlug&quot;:&quot;large&quot;,&quot;linkDestination&quot;:&quot;none&quot;} --&gt;&lt;/p&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;
&lt;figure class=&quot;aligncenter size-large&quot;&gt;&lt;img src=&quot;/assets/images/hassio_7.png&quot; alt=&quot;&quot; class=&quot;wp-image-4111&quot;/&gt;&lt;/figure&gt;
&lt;/div&gt;
&lt;p&gt;&lt;!-- /wp:image --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;A questo punto, torniamo sulla plancia, e vedremo che adesso abbiamo un tasto &lt;strong&gt;Aggiungi scheda&lt;/strong&gt;, proviamo a cliccare:&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:image {&quot;id&quot;:4112,&quot;sizeSlug&quot;:&quot;large&quot;,&quot;linkDestination&quot;:&quot;none&quot;} --&gt;&lt;/p&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;/assets/images/hassio_6-1024x963.png&quot; alt=&quot;&quot; class=&quot;wp-image-4112&quot;/&gt;&lt;/figure&gt;
&lt;p&gt;&lt;!-- /wp:image --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Avremo un elenco di possibili schede da aggiungere, ad esempio ricordate l&apos;integrazione con Meteorologisk institutt? Tra le schede possibili c&apos;&amp;egrave; anche quella relativa a questo servizio, quindi basta cercarla e attivarla:&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:image {&quot;align&quot;:&quot;center&quot;,&quot;id&quot;:4113,&quot;sizeSlug&quot;:&quot;large&quot;,&quot;linkDestination&quot;:&quot;none&quot;} --&gt;&lt;/p&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;
&lt;figure class=&quot;aligncenter size-large&quot;&gt;&lt;img src=&quot;/assets/images/hassio_8-1024x434.png&quot; alt=&quot;&quot; class=&quot;wp-image-4113&quot;/&gt;&lt;/figure&gt;
&lt;/div&gt;
&lt;p&gt;&lt;!-- /wp:image --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Fondamentale prendere confidenza con &lt;strong&gt;Supervisor&lt;/strong&gt;, lo trovate nella colonna a sinistra. Da questa dashboard potete installare, configurare ed avviare &lt;strong&gt;add-on&lt;/strong&gt; per Home Assistant, ne installeremo diverse, ma cominciamo con un paio di base, che conviene sempre tenere attive: &lt;strong&gt;File Editor&lt;/strong&gt; e &lt;strong&gt;SSH Terminal&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:image {&quot;align&quot;:&quot;center&quot;,&quot;id&quot;:4114,&quot;sizeSlug&quot;:&quot;large&quot;,&quot;linkDestination&quot;:&quot;none&quot;} --&gt;&lt;/p&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;
&lt;figure class=&quot;aligncenter size-large&quot;&gt;&lt;img src=&quot;/assets/images/hassio_9-1024x520.png&quot; alt=&quot;&quot; class=&quot;wp-image-4114&quot;/&gt;&lt;/figure&gt;
&lt;/div&gt;
&lt;p&gt;&lt;!-- /wp:image --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Il primo lo trovate tra gli add-on ufficiali, in alto, per quanto riguarda il secondo, personalmente preferisco qul&apos;installazioneello della &lt;strong&gt;community&lt;/strong&gt;. Per installare un add-on, basta semplicemente selezionarlo e, nella schermata successiva, cliccare su &lt;strong&gt;Installa&lt;/strong&gt;. A questo punto avremo questa situazione:&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:image {&quot;align&quot;:&quot;center&quot;,&quot;id&quot;:4115,&quot;sizeSlug&quot;:&quot;large&quot;,&quot;linkDestination&quot;:&quot;none&quot;} --&gt;&lt;/p&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;
&lt;figure class=&quot;aligncenter size-large&quot;&gt;&lt;img src=&quot;/assets/images/hassio_10-1024x560.png&quot; alt=&quot;&quot; class=&quot;wp-image-4115&quot;/&gt;&lt;/figure&gt;
&lt;/div&gt;
&lt;p&gt;&lt;!-- /wp:image --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Prima di cliccare su Avvia, possiamo decidere di far avviare il plugin assieme ad Home Assistant, di farlo ripartire automaticamente in caso di errori, di aggiornarsi automaticamente, e possiamo visualizzarlo nella colonna di sinistra.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Inoltre, cosa importantissima, in alto vedremo apparire delle voci tramite le quali accedere alla documentazione, alla configurazione, e al registro (il log). Nel caso di File Editor, possiamo avviare il plugin.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Nel caso di SSH Terminal invece, dovremo andare in &lt;strong&gt;Configurazione&lt;/strong&gt; ed inserire una password sufficientemente complessa (altrimenti il plugin, pur avviandosi correttamente, andr&amp;agrave; in errore):&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:image {&quot;align&quot;:&quot;center&quot;,&quot;id&quot;:4116,&quot;sizeSlug&quot;:&quot;large&quot;,&quot;linkDestination&quot;:&quot;none&quot;} --&gt;&lt;/p&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;
&lt;figure class=&quot;aligncenter size-large&quot;&gt;&lt;img src=&quot;/assets/images/Hassio_11-1024x526.png&quot; alt=&quot;&quot; class=&quot;wp-image-4116&quot;/&gt;&lt;/figure&gt;
&lt;/div&gt;
&lt;p&gt;&lt;!-- /wp:image --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;In linea generale, trovate eventuali configurazioni da fare nella scheda &lt;strong&gt;Documentazione&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Prima di concludere, vale la pena dare uno sguardo alla scheda Sistema raggiungibile dalla dashboard di Supervisor:&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:image {&quot;id&quot;:4117,&quot;sizeSlug&quot;:&quot;large&quot;,&quot;linkDestination&quot;:&quot;none&quot;} --&gt;&lt;/p&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;/assets/images/hassio_12-1024x598.png&quot; alt=&quot;&quot; class=&quot;wp-image-4117&quot;/&gt;&lt;/figure&gt;
&lt;p&gt;&lt;!-- /wp:image --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Da questa scheda possiamo gestire eventuali aggiornamenti dei componenti del sistema, riavviare Supervisor o direttamente il Raspberry Pi, e abbiamo accesso al log di sistema (la parte in basso), utilissimo in caso di errori strani e/o poco comprensibili.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;L&apos;ultima cosa, che per&amp;ograve; approfondiremo in seguito, da sapere per configurare Home Assistant riguarda la parte relativa ad &lt;strong&gt;Automazioni&lt;/strong&gt; e &lt;strong&gt;Scene&lt;/strong&gt;, che raggiungiamo da Impostazioni.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;In queste sezioni possiamo decidere di far interagire tra loro dispositivi e/o entit&amp;agrave;, e assegnare comportamenti (azioni) da eseguire in seguito a determinati trigger (eventi).&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:image {&quot;align&quot;:&quot;center&quot;,&quot;id&quot;:4118,&quot;sizeSlug&quot;:&quot;large&quot;,&quot;linkDestination&quot;:&quot;none&quot;} --&gt;&lt;/p&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;
&lt;figure class=&quot;aligncenter size-large&quot;&gt;&lt;img src=&quot;/assets/images/hassio_13.png&quot; alt=&quot;&quot; class=&quot;wp-image-4118&quot;/&gt;&lt;/figure&gt;
&lt;/div&gt;
&lt;p&gt;&lt;!-- /wp:image --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;A questo punto, non c&apos;&amp;egrave; molto altro, direi che dalla prossima volta possiamo iniziare a configurare dispositivi.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Alla prossima..&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;</content><author><name>RedBlue</name></author><category term="guide" /><category term="linux" /><category term="in evidenza" /><category term="domotica" /><category term="guida" /><category term="add-on" /><category term="configurazione" /><category term="home assistant" /><category term="supervisor" /><summary type="html">Nuovo articolo dedicato alla domotica, oggi vediamo come configurare Home Assistant. In realt&amp;agrave;, a questo punto dovremmo gi&amp;agrave; disporre di un sistema che si &amp;egrave; autoconfigurato, dopo l&apos;installazione infatti abbiamo creato un utente (figura sotto) e indicato la nostra posizione sulla mappa, quindi Home Assistant ci avr&amp;agrave; chiesto se vogliamo configurare delle integrazioni (in base ai dispositivi che pu&amp;ograve; aver rilevato in casa). Consiglio sia di indicare la posizione di casa sulla mappa (ci torner&amp;agrave; utile per automazioni future, ad esempio &quot;fai qualcosa se siamo tutti fuori casa&quot;), sia di lasciargli configurare eventuali dispositivi (se ci sono, tanto vale iniziare a riconoscerli). La schermata successiva serve a installare Integrazioni, provate a cercare i dispositivi smart che avete in casa, &amp;egrave; abbastanza probabile che l&apos;integrazione relativa esista gi&amp;agrave;. Ad, esempio, provate a cercare ed installare Meteorologisk institutt (Met.no), una semplice integrazione con un servizio meteo gratuito. Benissimo, saremo catapultati sulla plancia generale, che conterr&amp;agrave; un certo numero di schede (dipende da quello che ha trovato la configurazione iniziale). A questo punto dobbiamo prendere il controllo, clicchiamo in alto a destra sui tre puntini e selezioniamo Modifica plancia: A questo punto ci viene ricordato che la plancia pu&amp;ograve; essere gestita in automatico, ma il nostro scopo &amp;egrave; configurare Home Assistant, quindi prendiamo il controllo. La plancia a questo punto sar&amp;agrave; diversa nell&apos;aspetto rispetto a prima, ma prima di passarla in esame, clicchiamo in basso a sinistra sul nostro nome utente e a destra selezioniamo Impostazioni avanzate, cos&amp;igrave; da prendere completamente il controllo. A questo punto, torniamo sulla plancia, e vedremo che adesso abbiamo un tasto Aggiungi scheda, proviamo a cliccare: Avremo un elenco di possibili schede da aggiungere, ad esempio ricordate l&apos;integrazione con Meteorologisk institutt? Tra le schede possibili c&apos;&amp;egrave; anche quella relativa a questo servizio, quindi basta cercarla e attivarla: Fondamentale prendere confidenza con Supervisor, lo trovate nella colonna a sinistra. Da questa dashboard potete installare, configurare ed avviare add-on per Home Assistant, ne installeremo diverse, ma cominciamo con un paio di base, che conviene sempre tenere attive: File Editor e SSH Terminal. Il primo lo trovate tra gli add-on ufficiali, in alto, per quanto riguarda il secondo, personalmente preferisco qul&apos;installazioneello della community. Per installare un add-on, basta semplicemente selezionarlo e, nella schermata successiva, cliccare su Installa. A questo punto avremo questa situazione: Prima di cliccare su Avvia, possiamo decidere di far avviare il plugin assieme ad Home Assistant, di farlo ripartire automaticamente in caso di errori, di aggiornarsi automaticamente, e possiamo visualizzarlo nella colonna di sinistra. Inoltre, cosa importantissima, in alto vedremo apparire delle voci tramite le quali accedere alla documentazione, alla configurazione, e al registro (il log). Nel caso di File Editor, possiamo avviare il plugin. Nel caso di SSH Terminal invece, dovremo andare in Configurazione ed inserire una password sufficientemente complessa (altrimenti il plugin, pur avviandosi correttamente, andr&amp;agrave; in errore): In linea generale, trovate eventuali configurazioni da fare nella scheda Documentazione. Prima di concludere, vale la pena dare uno sguardo alla scheda Sistema raggiungibile dalla dashboard di Supervisor: Da questa scheda possiamo gestire eventuali aggiornamenti dei componenti del sistema, riavviare Supervisor o direttamente il Raspberry Pi, e abbiamo accesso al log di sistema (la parte in basso), utilissimo in caso di errori strani e/o poco comprensibili. L&apos;ultima cosa, che per&amp;ograve; approfondiremo in seguito, da sapere per configurare Home Assistant riguarda la parte relativa ad Automazioni e Scene, che raggiungiamo da Impostazioni. In queste sezioni possiamo decidere di far interagire tra loro dispositivi e/o entit&amp;agrave;, e assegnare comportamenti (azioni) da eseguire in seguito a determinati trigger (eventi). A questo punto, non c&apos;&amp;egrave; molto altro, direi che dalla prossima volta possiamo iniziare a configurare dispositivi. Alla prossima..</summary></entry><entry><title type="html">Domotica - Usare un SSD con Home Assistant</title><link href="https://red-blue.it/guide/in%20evidenza/raspberry%20pi/domotica/2021/06/14/domotica-usare-un-ssd-con-home-assistant.html" rel="alternate" type="text/html" title="Domotica - Usare un SSD con Home Assistant" /><published>2021-06-14T13:16:00+02:00</published><updated>2021-06-14T13:16:00+02:00</updated><id>https://red-blue.it/guide/in%20evidenza/raspberry%20pi/domotica/2021/06/14/domotica-usare-un-ssd-con-home-assistant</id><content type="html" xml:base="https://red-blue.it/guide/in%20evidenza/raspberry%20pi/domotica/2021/06/14/domotica-usare-un-ssd-con-home-assistant.html">&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Nuovo capitolo della serie dedicata alla domotica, oggi vedremo come &lt;strong&gt;usare un SSD con Home Assistant&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;A questo punto, dovremmo avere un Raspberry Pi dedicato esclusivamente ad Home Assistant, in grado di effettuare snapshots (backup) automatici del sistema su Google Drive.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Il sistema funziona gi&amp;agrave;, ma credo sia necessario un passaggio in pi&amp;ugrave;, ovvero aggiungere un disco SSD per evitare di mandare in &lt;strong&gt;crisi &lt;/strong&gt;la micro SD collegata al Raspberry.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;In linea di massima, una micro SD &amp;egrave; un tipo di memoria affidabile, basti pensare a cellulari, fotocamere etc., che di certo non soffrono particolarmente l&apos;usura del tempo.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Ma nel caso di Home Assistant, vengono effettuate anche &lt;strong&gt;migliaia di scritture al minuto&lt;/strong&gt;, e questo pu&amp;ograve; compromettere la micro SD, non pensata per uno stress simile.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;In rete ci sono innumerevoli guide per usare un SSD con Home Assistant al posto della micro SD, ma leggiamo questa &lt;a rel=&quot;noreferrer noopener&quot; href=&quot;https://www.home-assistant.io/faq#is-usb-boot-for-the-raspberry-pi-4-supported&quot; target=&quot;_blank&quot;&gt;FAQ sul sito ufficiale&lt;/a&gt;:&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:quote --&gt;&lt;/p&gt;
&lt;blockquote class=&quot;wp-block-quote&quot;&gt;&lt;p&gt;&lt;em&gt;Due to the complexity of USB and the USB mass storage device class booting from a USB device is brittle.&amp;nbsp;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;...&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Due to this, it is recommended to boot Home Assistant OS from an SD card and use a USB attached flash drive as data partition only&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;!-- /wp:quote --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;In sostanza, gli sviluppatori consigliano di avviare il sistema da micro SD (quindi sostanzialmente effettuando letture) e spostare su SSD la partizione dati, nella quale Home Assistant scrive continuamente.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:more --&gt;&lt;br /&gt;
&lt;!--more--&gt;&lt;br /&gt;
&lt;!-- /wp:more --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Ho deciso quindi di procedere come consigliato, e per prima cosa mi sono procurato un &lt;strong&gt;disco SSD&lt;/strong&gt; (non serve nulla di eccezionale tranquilli), e un controller &lt;strong&gt;SATA-USB3.0&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Vi lascio i link di quelli che ho acquistato io (si tratta di link pubblicitari, quindi se non li vedete probabilmente avete attivo un ad blocker. Libera scelta, posso per&amp;ograve; garantirvi che sono quelli che ho realmente acquistato, tutti i link che pubblico riguardano oggetti inerenti quello di cui scrivo), ma ovviamente il web &amp;egrave; pieno di offerte:&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:html --&gt;&lt;br /&gt;
&lt;iframe style=&quot;width:120px;height:240px;&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; src=&quot;//rcm-eu.amazon-adsystem.com/e/cm?lt1=_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=redblue03-21&amp;o=29&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=as_ss_li_til&amp;asins=B011M8YACM&amp;linkId=81cacc30408e962ce10f26c34b43d06c&quot;&gt;&lt;/iframe&gt;&lt;br /&gt;
&lt;iframe style=&quot;width:120px;height:240px;&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; src=&quot;//rcm-eu.amazon-adsystem.com/e/cm?lt1=_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=redblue03-21&amp;o=29&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=as_ss_li_til&amp;asins=B01KFLH1WS&amp;linkId=e2f5b3a5a257a2507aca33ba8f82a274&quot;&gt;&lt;/iframe&gt;&lt;br /&gt;
&lt;!-- /wp:html --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Per poter usare un SSD con Home Assistant, &amp;egrave; necessario poter accedere alla &lt;strong&gt;shell &lt;/strong&gt;di sistema, usando una connessione SSH sulla porta &lt;strong&gt;22222&lt;/strong&gt;, vi rimando a &lt;a rel=&quot;noreferrer noopener&quot; href=&quot;http://localhost:4000/domotica/aprire-la-porta-ssh-22222-su-home-assistant.html&quot; data-type=&quot;post&quot; target=&quot;_blank&quot;&gt;questa &lt;/a&gt;&lt;a href=&quot;http://localhost:4000/domotica/aprire-la-porta-ssh-22222-su-home-assistant.html&quot; data-type=&quot;post&quot; data-id=&quot;4076&quot;&gt;guida&lt;/a&gt; per effettuare questa operazione.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Una volta effettuato l&apos;accesso, al &lt;strong&gt;prompt&lt;/strong&gt; dovrete inserire:&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:syntaxhighlighter/code {&quot;language&quot;:&quot;bash&quot;,&quot;lineNumbers&quot;:false} --&gt;&lt;/p&gt;
&lt;pre class=&quot;wp-block-syntaxhighlighter-code&quot;&gt;login&lt;/pre&gt;
&lt;p&gt;&lt;!-- /wp:syntaxhighlighter/code --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Collegate il controller al disco, inserite il tutto in una porta USB 3 (quelle azzurre) e date:&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:syntaxhighlighter/code {&quot;language&quot;:&quot;bash&quot;,&quot;lineNumbers&quot;:false} --&gt;&lt;/p&gt;
&lt;pre class=&quot;wp-block-syntaxhighlighter-code&quot;&gt;lsblk&lt;/pre&gt;
&lt;p&gt;&lt;!-- /wp:syntaxhighlighter/code --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Otterrete qualcosa di simile:&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:image {&quot;id&quot;:4096,&quot;sizeSlug&quot;:&quot;large&quot;,&quot;linkDestination&quot;:&quot;none&quot;} --&gt;&lt;/p&gt;
&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;/assets/images/home_assistant_ssd_2.png&quot; alt=&quot;&quot; class=&quot;wp-image-4096&quot;/&gt;&lt;/figure&gt;
&lt;p&gt;&lt;!-- /wp:image --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Vediamo come il disco (indicato con &lt;strong&gt;sda&lt;/strong&gt;) sia effettivamente riconosciuto (&lt;em&gt;&lt;span style=&quot;text-decoration: underline;&quot;&gt;attenzione perch&amp;egrave; spesso gli SSD arrivano non inizializzati, quindi potrebbe essere necessario prima inizializzarlo creando un MBR, non &amp;egrave; molto importante la creazione di una partizione in quanto poi verrebbe sovrascritta&lt;/span&gt;&lt;/em&gt;), e ci&amp;ograve; che ci interessa &amp;egrave; la partizione indicata con &lt;strong&gt;/mnt/data&lt;/strong&gt;, che sposteremo. &lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;ATTENZIONE!&lt;/strong&gt; L&apos;immagine &amp;egrave; puramente indicativa, nel mio caso la partizione &amp;egrave; gi&amp;agrave; stata spostata, voi molto probabilmente vedrete sda1 senza alcun mountpoint, e /mnt/data sar&amp;agrave; montata su mmcblk0pX, ovvero sar&amp;agrave; sulla SD.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Avete fatto un backup vero? Perch&amp;egrave; adesso si fa sul serio!&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Digitate:&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:syntaxhighlighter/code {&quot;language&quot;:&quot;bash&quot;,&quot;lineNumbers&quot;:false} --&gt;&lt;/p&gt;
&lt;pre class=&quot;wp-block-syntaxhighlighter-code&quot;&gt;datactl move /dev/sda&lt;/pre&gt;
&lt;p&gt;&lt;!-- /wp:syntaxhighlighter/code --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;E avrete qualcosa del genere:&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:image {&quot;align&quot;:&quot;center&quot;,&quot;id&quot;:4098,&quot;sizeSlug&quot;:&quot;large&quot;,&quot;linkDestination&quot;:&quot;none&quot;} --&gt;&lt;/p&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;
&lt;figure class=&quot;aligncenter size-large&quot;&gt;&lt;img src=&quot;/assets/images/home_assistant_ssd_1.png&quot; alt=&quot;&quot; class=&quot;wp-image-4098&quot;/&gt;&lt;/figure&gt;
&lt;/div&gt;
&lt;p&gt;&lt;!-- /wp:image --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;A questo punto, occorre riavviare per spostare effettivamente tutto (&lt;strong&gt;Supervisor -&gt; Host -&gt; Riavvia Host&lt;/strong&gt;), se siete connessi con Home Assistant, sappiate che prima di tornare online ci vorr&amp;agrave; parecchio tempo, ma alla fine vedrete l&apos;indicazione dello spazio libero su disco cambiare (a meno che non abbiate usato una micro SD gigantesca).&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Mi raccomando, &lt;strong&gt;&lt;span style=&quot;text-decoration: underline;&quot;&gt;NON INTERROMPETE IL PROCESSO DI SPOSTAMENTO&lt;/span&gt;&lt;/strong&gt;, pena il dover ricominciare tutto daccapo (intendo a partire dall&apos;installazione di Home Assistant), in quanto i dati potrebbero irrimediabilmente corrompersi.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;A conferma di tutto, date:&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:syntaxhighlighter/code {&quot;language&quot;:&quot;bash&quot;} --&gt;&lt;/p&gt;
&lt;pre class=&quot;wp-block-syntaxhighlighter-code&quot;&gt;df -h | grep sda1&lt;/pre&gt;
&lt;p&gt;&lt;!-- /wp:syntaxhighlighter/code --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;E avrete qualcosa del genere:&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:image {&quot;align&quot;:&quot;center&quot;,&quot;id&quot;:4099,&quot;sizeSlug&quot;:&quot;large&quot;,&quot;linkDestination&quot;:&quot;none&quot;} --&gt;&lt;/p&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;
&lt;figure class=&quot;aligncenter size-large&quot;&gt;&lt;img src=&quot;/assets/images/home_assistant_ssd_3.png&quot; alt=&quot;&quot; class=&quot;wp-image-4099&quot;/&gt;&lt;/figure&gt;
&lt;/div&gt;
&lt;p&gt;&lt;!-- /wp:image --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;In cui &amp;egrave; evidente la partizione /mnt/data &amp;egrave; stata spostata. Ora potete usare un SSD su Home Assistant come disco dati, andando ad aumentare le prestazioni e la stabilit&amp;agrave; del sistema.&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Dal prossimo articolo, inizieremo a smanettare con la domotica vera e propria! Stay tuned..&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- wp:paragraph --&gt;&lt;/p&gt;
&lt;p&gt;Alla prossima..&lt;/p&gt;
&lt;p&gt;&lt;!-- /wp:paragraph --&gt;&lt;/p&gt;</content><author><name>RedBlue</name></author><category term="guide" /><category term="in evidenza" /><category term="raspberry pi" /><category term="domotica" /><category term="guida" /><category term="ssd" /><category term="domotica" /><category term="home assistant" /><category term="raspberry" /><summary type="html">Nuovo capitolo della serie dedicata alla domotica, oggi vedremo come usare un SSD con Home Assistant. A questo punto, dovremmo avere un Raspberry Pi dedicato esclusivamente ad Home Assistant, in grado di effettuare snapshots (backup) automatici del sistema su Google Drive. Il sistema funziona gi&amp;agrave;, ma credo sia necessario un passaggio in pi&amp;ugrave;, ovvero aggiungere un disco SSD per evitare di mandare in crisi la micro SD collegata al Raspberry. In linea di massima, una micro SD &amp;egrave; un tipo di memoria affidabile, basti pensare a cellulari, fotocamere etc., che di certo non soffrono particolarmente l&apos;usura del tempo. Ma nel caso di Home Assistant, vengono effettuate anche migliaia di scritture al minuto, e questo pu&amp;ograve; compromettere la micro SD, non pensata per uno stress simile. In rete ci sono innumerevoli guide per usare un SSD con Home Assistant al posto della micro SD, ma leggiamo questa FAQ sul sito ufficiale: Due to the complexity of USB and the USB mass storage device class booting from a USB device is brittle.&amp;nbsp; ... Due to this, it is recommended to boot Home Assistant OS from an SD card and use a USB attached flash drive as data partition only In sostanza, gli sviluppatori consigliano di avviare il sistema da micro SD (quindi sostanzialmente effettuando letture) e spostare su SSD la partizione dati, nella quale Home Assistant scrive continuamente. Ho deciso quindi di procedere come consigliato, e per prima cosa mi sono procurato un disco SSD (non serve nulla di eccezionale tranquilli), e un controller SATA-USB3.0. Vi lascio i link di quelli che ho acquistato io (si tratta di link pubblicitari, quindi se non li vedete probabilmente avete attivo un ad blocker. Libera scelta, posso per&amp;ograve; garantirvi che sono quelli che ho realmente acquistato, tutti i link che pubblico riguardano oggetti inerenti quello di cui scrivo), ma ovviamente il web &amp;egrave; pieno di offerte: Per poter usare un SSD con Home Assistant, &amp;egrave; necessario poter accedere alla shell di sistema, usando una connessione SSH sulla porta 22222, vi rimando a questa guida per effettuare questa operazione. Una volta effettuato l&apos;accesso, al prompt dovrete inserire: login Collegate il controller al disco, inserite il tutto in una porta USB 3 (quelle azzurre) e date: lsblk Otterrete qualcosa di simile: Vediamo come il disco (indicato con sda) sia effettivamente riconosciuto (attenzione perch&amp;egrave; spesso gli SSD arrivano non inizializzati, quindi potrebbe essere necessario prima inizializzarlo creando un MBR, non &amp;egrave; molto importante la creazione di una partizione in quanto poi verrebbe sovrascritta), e ci&amp;ograve; che ci interessa &amp;egrave; la partizione indicata con /mnt/data, che sposteremo. ATTENZIONE! L&apos;immagine &amp;egrave; puramente indicativa, nel mio caso la partizione &amp;egrave; gi&amp;agrave; stata spostata, voi molto probabilmente vedrete sda1 senza alcun mountpoint, e /mnt/data sar&amp;agrave; montata su mmcblk0pX, ovvero sar&amp;agrave; sulla SD. Avete fatto un backup vero? Perch&amp;egrave; adesso si fa sul serio! Digitate: datactl move /dev/sda E avrete qualcosa del genere: A questo punto, occorre riavviare per spostare effettivamente tutto (Supervisor -&gt; Host -&gt; Riavvia Host), se siete connessi con Home Assistant, sappiate che prima di tornare online ci vorr&amp;agrave; parecchio tempo, ma alla fine vedrete l&apos;indicazione dello spazio libero su disco cambiare (a meno che non abbiate usato una micro SD gigantesca). Mi raccomando, NON INTERROMPETE IL PROCESSO DI SPOSTAMENTO, pena il dover ricominciare tutto daccapo (intendo a partire dall&apos;installazione di Home Assistant), in quanto i dati potrebbero irrimediabilmente corrompersi. A conferma di tutto, date: df -h | grep sda1 E avrete qualcosa del genere: In cui &amp;egrave; evidente la partizione /mnt/data &amp;egrave; stata spostata. Ora potete usare un SSD su Home Assistant come disco dati, andando ad aumentare le prestazioni e la stabilit&amp;agrave; del sistema. Dal prossimo articolo, inizieremo a smanettare con la domotica vera e propria! Stay tuned.. Alla prossima..</summary></entry></feed>