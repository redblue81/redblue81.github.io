<!DOCTYPE html>

<html>

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>
    Shell Bash - 4 - Espressioni condizionali - RedBlue&#39;s Blog
    
  </title>

  <meta name="description" content="Oggi affronteremo un altro argomento fondamentale nello scripting con la Shell Bash: le espressioni condizionali, ovvero i costrutti if - if/then/elif/else -...">

  <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

  <script src="https://use.fontawesome.com/releases/v5.15.3/js/all.js" crossorigin="anonymous"></script>

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="https://red-blue.it/guide/linux/in%20evidenza/2011/11/18/shell-bash-4-espressioni-condizionali.html">
  <link rel="alternate" type="application/rss+xml" title="RedBlue&#39;s Blog" href="/feed.xml">

</head>


<body>

  <!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
  <div class="container">
    <a class="navbar-brand" href="/">RedBlue&#39;s Blog</a>
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      Menu
      <i class="fa fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link" href="/">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/about">About</a>
        </li>
		    <li class="nav-item">
          <a class="nav-link" href="/domotica">Domotica</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/posts">Posts</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/contact">Contacts</a>
        </li>
      </ul>
    </div>
  </div>
</nav>

  <!-- Page Header -->

  <header class="masthead">
    
    <div class="overlay"></div>
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
          <div class="post-heading">
            <h1>Shell Bash - 4 - Espressioni condizionali</h1>
            
            <span class="meta">Posted by
              <a href="#">RedBlue</a>
              on November 18, 2011 &middot; <span class="reading-time" title="Estimated read time">
  
   7 mins  read </span>

            </span>
          </div>
        </div>
      </div>
    </div>
  </header>

  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">

        <p>Oggi affronteremo un altro argomento fondamentale nello scripting con la Shell Bash: le espressioni condizionali, ovvero i costrutti <strong>if</strong> - <strong>if/then/elif/else</strong> - <strong>case</strong>.</p>
<p>Cominciamo col chiarire a cosa servono questi costrutti: pu&ograve; accadere in uno script di avere la necessit&agrave; di operare in modi diversi a seconda del <strong>risultato</strong> di una certa operazione e/o di un comando. La sintassi pi&ugrave; elementare &egrave; la seguente:</p>
<pre class="brush: bash; gutter: true">if (CONDIZIONE); then

    (ISTRUZIONI);

fi</pre>&egrave;&egrave;&egrave;
<p>Che letteralmente significa "<span style="text-decoration: underline;">se si verifica CONDIZIONE allora esegui ISTRUZIONI</span>". La condizione di controllo pu&ograve; essere un <strong>confronto tra numeri o stringhe</strong>, ma anche semplicemente l'<strong>esito di un comando</strong> (ovvero, se il comando va a buon fine = restituisce valore zero, allora esegui le istruzioni successive).<br />
<!--moreContinua a leggere.. -->Due importanti precisazioni: 1) ad ogni if <span style="text-decoration: underline;"><strong>deve</strong></span> corrispondere un fi, che sta ad indicare all'interprete che il costrutto &egrave; terminato, e 2) ogni condizione restituisce <span style="text-decoration: underline;"><strong>sempre</strong></span> un valore numerico, pari a <strong>zero</strong> se il risultato &egrave; <strong>vero</strong> (true), altrimenti diverso da zero (che viene ovviamente interpretato come falso). Questo significa che anche un intero comando pu&ograve; essere impiegato in un costrutto condizionale, ovviamente perch&egrave; se tale comando va a buon fine verr&agrave; restituito zero e sar&agrave; interpretato come true, altrimenti come false.</p>
<p>Vediamo un piccolissimo script di esempio:</p>
<pre class="brush: bash; gutter: true">#!/bin/bash

clear

echo -e "Inizio script\n";

if [[ -e /etc/passwd ]]; then

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo "File /etc/passwd esistente";

fi

if grep -q root /etc/passwd; then

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo "Utente root verificato";

fi

echo -e "\nFine script";</pre>
<p>Questo script non fa altro che <strong>verificare</strong> l'esistenza del file <code>/etc/passwd</code> (<strong>riga 4</strong>), per poi verificare l'esistenza dell'utente <code>root</code> (<strong>riga 7</strong>). Completano lo script il comando <code>clear</code> che non fa altro che pulire la shell, e due semplici comandi <code>echo</code>, che scrivono a video la stringa indicata (l'opzione <code>-e</code> invece abilita le sequenze di <strong>escape</strong>, il <code>\n</code> nell'esempio, che viene interpretato come "vai a capo").</p>
<p>Soffermiamoci sulla condizione nell'istruzione alla riga 4:</p>
<pre class="brush: bash; gutter: true">  [[ -e /etc/passwd ]];</pre>
<p>Il <code>-e</code> indica all'interprete di verificare l'esistenza del file indicato, di seguito un elenco di tali espressioni:</p>
<table border="1">
<thead>
<tr>
<th>Operatore</th>
<th>Descrizione</th>
</tr>
</thead>
<tbody>&egrave;
<tr>
<td><tt>-a</tt>, <tt>-e</tt></td>
<td>Restituisce true se il file esiste</td>
</tr>
<tr>
<td><tt>-s</tt></td>
<td>Restituisce true se il file esiste ed ha dimensione maggiore di zero byte</td>
</tr>&egrave;&egrave;
<tr>
<td><tt>-d</tt>, <tt>-f</tt>, <tt>-h</tt></td>
<td>Restituisce true se il file esiste ed &egrave; una directory, o un file regolare, o un link</td>
</tr>
<tr>
<td><tt>-r</tt>, <tt>-w</tt>, <tt>-x</tt></td>
<td>Restituisce true se lo script ha i privilegi di lettura, o di scrittura, o di esecuzione sul file</td>
</tr>
<tr>
<td><tt>-nt</tt>, <tt>-ot</tt></td>
<td>Restituisce true se il primo file &egrave; pi&ugrave; recente del secondo (nt) o se il secondo &egrave; pi&ugrave; recente del primo (ot)</td>
</tr>
<tr>
<td><tt>-eq</tt>, <tt>-ne</tt></td>
<td>Restituisce true se tra due stringhe queste hanno lo stesso valore intero o due valori interi differenti</td>
</tr>&egrave;&egrave;
<tr>
<td><tt>-lt</tt>, <tt>-le</tt></td>
<td>Restituisce true se la prima stringa ha un valore minore o minore o uguale al valore della seconda</td>
</tr>
<tr>
<td><tt>-gt</tt>, <tt>-ge</tt></td>
<td>Restituisce true&nbsp;se la prima stringa ha un valore maggiore o maggiore o uguale al valore della seconda</td>
</tr>
</tbody>
</table>
<p>E' importante anche chiarire il modo corretto di utilizzo della sintassi <code>[[ ... ]]</code>: <span style="text-decoration: underline;"><strong>attenzione</strong></span>!! Tra le doppie parentesi (sia di apertura che di chiusura) e l'espressione al loro interno &egrave; <strong>obbligatorio</strong> inserire gli spazi, altrimenti non verr&agrave; interpretato correttamente. Un'ultima cosa, si pu&ograve; anche trovare ancora la stessa espressione indicata con <code>[ ... ]</code>, ovvero con una sola parentesi quadra, &egrave; una scrittura vecchiotta, meglio usare quella che ho indicato prima.</p>
<p>Lo script precedente pu&ograve; essere <strong>migliorato</strong>: supponiamo di trovarci nella situazione in cui se un comando ha un esito devono essere eseguite delle istruzioni, <strong>altrimenti</strong> devono esserne eseguite altre. Bene, in questa situazione ci viene in aiuto l'istruzione <code>else</code>, quindi il costrutto assume la forma:</p>
<pre class="brush: bash; gutter: true">if (CONDIZIONE); then

    (BLOCCO1);

else

    (BLOCCO2);

fi</pre>
<p>Lo script precedente pu&ograve; essere cos&igrave; modificato:</p>
<pre class="brush: bash; gutter: true">#!/bin/bash
&egrave;
clear

utente="qwerty";

echo -e "Inizio script\n";

if [[ -e /etc/passwd ]]; then

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo "File /etc/passwd esistente";

else

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo "Il file /etc/passwd non esiste!!";

fi

if grep -q $utente&nbsp; /etc/passwd; then

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo "Utente $utente verificato";

else

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo "L'utente $utente non esiste!!";

fi

echo -e "\nFine script";</pre>
<p>In questo caso, se uno dei comandi d&agrave; esito <strong>negativo</strong>, questo viene segnalato. Ho aggiunto una variabile che contiene il nome dell'utente in modo da evidenziare proprio questo comportamento, a meno che nel vostro sistema non abbiate davvero l'utente <strong>qwerty</strong>, lo script eseguir&agrave; il secondo ramo <code>else</code>.</p>
<p>Ultima cosa da dire sull'istruzione if, &egrave; possibile <strong>annidare</strong> pi&ugrave; if, in modo da creare costrutti pi&ugrave; <strong>complessi</strong>, in questo caso si introduce l'istruzione <code>elif</code>, arrivando alla seguente sintassi:</p>
<pre class="brush: bash; gutter: true">if (CONDIZIONE1); then

    (BLOCCO1);

elif (CONDIZIONE2); then

    (BLOCCO2);

elif (CONDIZIONE3); then

    (BLOCCO3);

else

    (BLOCCO4);

fi</pre>
<p>Ovviamente la complessit&agrave; pu&ograve; essere anche maggiore. Giusto per fare un esempio, ecco uno script con un costrutto if complesso:</p>
<pre class="brush: bash; gutter: true">#!/bin/bash

clear

numero=$1;

echo -e "Inizio script\n";&egrave;

if [[ $numero == uno ]]; then

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo "Hai digitato uno";

elif [[ $numero == due ]]; then

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo "Hai digitato due";

elif [[ $numero == tre ]]; then

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo "Hai digitato tre";

else

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo "Altro numero diverso da uno, due e tre";

fi

echo -e "\nFine script";</pre>
<p>Provate a lanciare lo script, chiamato ad esempio <code>num.sh</code>, con <code>./num.sh due</code>, e vedrete il funzionamento del costrutto messo in piedi.</p>
<p>Ovviamente, un costrutto di questo tipo pu&ograve; diventare estremamente complesso al crescere dell'annidamento. Per ovviare a questo, esiste l'istruzione case, che ha la seguente sintassi:</p>
<pre class="brush: bash; gutter: true">case (VARIABILE) in

    ( CONDIZIONE1 )

        (BLOCCO1);;

    ( CONDIZIONE2 )

        (BLOCCO2);;

    ( CONDIZIONE3 )

        (BLOCCO3)

    ...

    ( * )

        ( BLOCCO4)

esac</pre>
<p>Lo script precedente, il cui funzionamento resta immutato, diventa:</p>
<pre class="brush: bash; gutter: true">!/bin/bash

clear

numero=$1;

echo -e "Inizio script\n";

case $numero in

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ( uno )

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo "Hai digitato uno";;

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ( due )

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo "Hai digitato due";;

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ( tre )

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo "Hai digitato tre";;

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ( * )

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo "Altro numero diverso da uno, due e tre"

esac

echo -e "\nFine script";</pre>
<p>Da notare l'ultima voce, contrassegnata da <code>( * )</code>, indica il <code>default</code>, ovvero ci&ograve; che deve essere eseguito se non si ricade in alcuno dei casi precedentemente indicati. Attenzione perch&egrave; anche in questo caso gli spazi sono <strong>obbligatori</strong>!!</p>
<p>Alla prossima..</p>


        <hr>

        <div class="clearfix">

          
          <a class="btn btn-primary float-left" href="/blog/social%20network/2011/11/08/redblue-s-blog-su-google.html" data-toggle="tooltip" data-placement="top" title="RedBlue's Blog su Google+">&larr; Previous<span class="d-none d-md-inline">
              Post</span></a>
          
          
          <a class="btn btn-primary float-right" href="/linux/mint/2011/11/24/rilasciata-linux-mint-12-lisa.html" data-toggle="tooltip" data-placement="top" title="Rilasciata Linux Mint 12 "Lisa"">Next<span class="d-none d-md-inline">
              Post</span> &rarr;</a>
          

        </div>

      </div>
    </div>
  </div>


  <!-- Footer -->

<hr>

<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">
        <ul class="list-inline text-center">
          
          <li class="list-inline-item">
            <a href="mailto:redblue81@gmail.com">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="far fa-envelope fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          <li class="list-inline-item">
            <a href="https://twitter.com/redblue81">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          <li class="list-inline-item">
            <a href="https://www.facebook.com/angeloredbluepascadopoli">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-facebook-f fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          <li class="list-inline-item">
            <a href="https://www.linkedin.com/in/angelopascadopoli">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-linkedin fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          <li class="list-inline-item">
            <a href="https://github.com/redblue81">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-github fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          <li class="list-inline-item">
            <a href="https://instagram.com/redblue81">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-instagram fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <p class="copyright text-muted">Copyright &copy; RedBlue 2025</p>
      </div>
    </div>
  </div>
</footer>

  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="/assets/vendor/startbootstrap-clean-blog/js/scripts.js"></script>

<script src="/assets/scripts.js"></script>




  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-LVMQV0LE9M"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-LVMQV0LE9M');
</script>

</body>

</html>
